/**
 * @file nvp6124_lib.c
 * NextChip NVP6124 4CH AHD2.0 RX and 9CH Audio Codec Library
 * Copyright (C) 2015 GM Corp. (http://www.grain-media.com)
 *
 * $Revision: 1.10 $
 * $Date: 2015/10/14 02:15:10 $
 *
 * ChangeLog:
 *  $Log: nvp6124_lib.c,v $
 *  Revision 1.10  2015/10/14 02:15:10  shawn_hu
 *  Rearrange NVP6124 output channel sequence (Reg@0xC0~C7) to fix the problem of a straight line shown on the video.
 *
 *  Revision 1.9  2015/05/25 08:23:51  shawn_hu
 *  1. Update NVP6124 setting to Nextchip driver release v0.3.1.
 *  2. Remove the H_DELAY setting during 2-CH AFHD-CIF mode.
 *
 *  Revision 1.8  2015/05/04 07:51:23  shawn_hu
 *  Fix the bug regarding to the register initialization of bank6~8.
 *  e.g. Reg@0x2A should be 0x72 after initialization, but it always keeps the default value as 0x52.
 *
 *  Revision 1.7  2015/04/29 09:52:57  shawn_hu
 *  1. Update NVP6124 setting to Nextchip driver release v0.3.0.
 *  2. Fix the wrong channel sequence issue during 2CH dual edge & 4CH byte interleave mode.
 *  3. In current design, 2CH Half-720P60/50 & 4CH Half-720P30/25 AHD-CIF mode are not supported.
 *
 *  Revision 1.6  2015/03/31 11:49:16  sainthuang
 *  modify change log
 *
 *  Revision 1.5  2015/03/31 17:54:55  sainthuang
 *  NVP6124 audio driver porting
 *
  *
 *  Revision 1.4  2015/03/26 11:28:30  shawn_hu
 *  Fixed the jagged edges issue during 960H-NTSC/PAL video output.
 *
 *  Revision 1.3  2015/03/24 07:16:13  shawn_hu
 *  Add NVP6124 2-CH dual edge / 4-CH byte interleave output mode support.
 *  Note: AHD half-720P 4-CH output mode is under development (abnormal VCLK issue).
 *
 *  Revision 1.2  2015/01/07 11:31:16  shawn_hu
 *  Uncomment some audio-related API for proc node. (Audio setting needs update)
 *
 *  Revision 1.1  2015/01/07 09:40:23  shawn_hu
 *  Add Nextchip AHD2.0 NVP6124 driver support.
 *
 */

#include <linux/version.h>
#include <linux/types.h>
#include <linux/module.h>
#include <linux/kernel.h>
#include <linux/string.h>
#include <linux/delay.h>

#include "nextchip/nvp6124.h"        ///< from module/include/front_end/ahd

extern int audio_chnum;

/* AB => BA */
#define SWAP_2CHANNEL(x)    do { (x) = (((x) & 0xF0) >> 4 | ((x) & 0x0F) << 4); } while(0);
/* ABCD => CDAB */
#define SWAP_4CHANNEL(x)    do { (x) = (((x) & 0xFF00) >> 8 | ((x) & 0x00FF) << 8); } while(0);
/* ABCDEFGH => GHEFCDAB */
#define SWAP_8CHANNEL(x)    do { (x) = (((x) & 0xFF000000) >> 24 | ((x) & 0x00FF0000) >> 8 | ((x) & 0x0000FF00) << 8 | ((x) & 0x000000FF) << 24); } while(0);

static struct nvp6124_video_fmt_t nvp6124_video_fmt_info[NVP6124_VFMT_MAX] = {
    /* Idx                  Width Height  Prog    FPS */
    { NVP6124_VFMT_UNKNOWN,         0,     0,    0,     0 },
    //{ NVP6124_VFMT_720H25,        720,   576,    0,    50 },  ///< SD   720H  PAL
    //{ NVP6124_VFMT_720H30,        720,   480,    0,    60 },  ///< SD   720H  NTSC
    { NVP6124_VFMT_960H25,        960,   576,    0,    50 },  ///< SD   960H  PAL
    { NVP6124_VFMT_960H30,        960,   480,    0,    60 },  ///< SD   960H  NTSC
    { NVP6124_VFMT_720P25,       1280,   720,    1,    25 },  ///< AHD  720P  25FPS
    { NVP6124_VFMT_720P30,       1280,   720,    1,    30 },  ///< AHD  720P  30FPS
    { NVP6124_VFMT_720P50,       1280,   720,    1,    50 },  ///< AHD  720P  50FPS
    { NVP6124_VFMT_720P60,       1280,   720,    1,    60 },  ///< AHD  720P  60FPS
    { NVP6124_VFMT_1080P25,      1920,  1080,    1,    25 },  ///< AFHD 1080P 25FPS
    { NVP6124_VFMT_1080P30,      1920,  1080,    1,    30 },  ///< AFHD 1080P 30FPS
    { NVP6124_VFMT_AHD_CIF_P25,   640,   720,    1,    25 },  ///< AHD  CIF   25FPS
    { NVP6124_VFMT_AHD_CIF_P30,   640,   720,    1,    30 },  ///< AHD  CIF   30FPS
    { NVP6124_VFMT_AFHD_CIF_P25,  960,  1080,    1,    25 },  ///< AFHD CIF   25FPS
    { NVP6124_VFMT_AFHD_CIF_P30,  960,  1080,    1,    30 },  ///< AFHD CIF   30FPS
};

/***************************************************************************************
 * AHD 30P Common
 ***************************************************************************************/
static unsigned char NVP6124_B0_30P[] = {
      // 0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0A,0x0B,0x0C,0x0D,0x0E,0x0F
/*0x00*/ 0x00,0x00,0x20,0x03,0x00,0x00,0x00,0x00,0x60,0x60,0x60,0x60,0x08,0x08,0x08,0x08,
/*0x10*/ 0x80,0x80,0x80,0x80,0x90,0x90,0x90,0x90,0x00,0x00,0x00,0x00,0xaf,0xaf,0xaf,0xaf,
/*0x20*/ 0x2f,0x92,0x0b,0x43,0x2f,0x92,0x0b,0x43,0x2f,0x92,0x0b,0x43,0x2f,0x92,0x0b,0x43,
/*0x30*/ 0x17,0x17,0x17,0x17,0x04,0x04,0x04,0x04,0x0a,0x0a,0x0a,0x0a,0x80,0x80,0x80,0x80,
/*0x40*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x50*/ 0x00,0x00,0x00,0x00,0xf1,0x10,0x10,0x00,0xa0,0xa0,0xa0,0xa0,0x9e,0x9e,0x9e,0x9e,
/*0x60*/ 0x00,0x00,0x00,0x00,0x8d,0x8d,0x8d,0x8d,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x70*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x88,0x88,0x11,0x11,0x00,0x00,0x00,0x00,
/*0x80*/ 0x00,0x66,0x66,0x33,0x33,0x00,0x00,0x00,0x00,0x00,0x00,0x11,0x11,0x77,0x77,0x00,
/*0x90*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x16,0x16,0x16,0x16,0x00,0x00,0x00,0x00,
/*0xa0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x11,0x11,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xb0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xc0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xd0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xe0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x90,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xf0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
};

static unsigned char NVP6124_B1_30P[] = {
      // 0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0A,0x0B,0x0C,0x0D,0x0E,0x0F
/*0x00*/ 0x02,0x0f,0x0f,0x0f,0x0f,0x0f,0x1b,0xc8,0x03,0x00,0x10,0x32,0x54,0x76,0x00,0x98,
/*0x10*/ 0xba,0xdc,0xfe,0x08,0x00,0x00,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,
/*0x20*/ 0x88,0x88,0x03,0x19,0x18,0x16,0x00,0x00,0x00,0x88,0xff,0x40,0xaa,0xaa,0xaa,0xaa,
/*0x30*/ 0xaa,0x82,0x00,0x00,0x00,0x8C,0xA0,0x00,0x18,0x01,0x80,0x30,0x00,0x00,0x80,0x00,
/*0x40*/ 0x0f,0x0f,0x0f,0x0f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x50*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x60*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x70*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x80*/ 0x60,0x00,0x14,0x2C,0x00,0x00,0x00,0x00,0x44,0x44,0xdd,0xdd,0x11,0x11,0x55,0x55,
/*0x90*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xa0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xb0*/ 0x00,0x00,0x00,0x00,0x40,0x30,0x40,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xc0*/ 0x22,0x22,0x33,0x33,0x00,0x00,0x11,0x11,0x00,0x00,0xff,0x00,0x30,0x30,0x30,0x30,
/*0xd0*/ 0x00,0x00,0x00,0xf0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xe0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xf0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01
};

static unsigned char  NVP6124_B2_30P[] = {
      // 0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0A,0x0B,0x0C,0x0D,0x0E,0x0F
/*0x00*/ 0x03,0x60,0x03,0x60,0x03,0x60,0x03,0x60,0x03,0x60,0x03,0x60,0x03,0x60,0x03,0x60,
/*0x10*/ 0x00,0x00,0x0F,0x00,0xc0,0x00,0x55,0x55,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
/*0x20*/ 0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
/*0x30*/ 0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
/*0x40*/ 0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
/*0x50*/ 0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
/*0x60*/ 0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
/*0x70*/ 0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
/*0x80*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x90*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xa0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xb0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xc0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xd0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xe0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xf0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x02
};

static unsigned char NVP6124_B3_30P[] = {
      // 0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0A,0x0B,0x0C,0x0D,0x0E,0x0F
/*0x00*/ 0x37,0x37,0x1b,0x05,0x00,0x07,0x00,0x09,0x00,0x00,0x08,0x06,0x00,0x46,0x00,0x00,
/*0x10*/ 0xaa,0x1c,0x18,0xff,0xaa,0x3c,0xff,0xff,0xaa,0x1b,0x00,0x00,0xaa,0x3b,0x00,0x00,
/*0x20*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x01,
/*0x30*/ 0x00,0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x32,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x40*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x50*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x60*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x70*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x80*/ 0x37,0x37,0x1b,0x05,0x00,0x07,0x00,0x09,0x00,0x00,0x08,0x06,0x00,0x46,0x00,0x00,
/*0x90*/ 0xaa,0x1c,0x18,0xff,0xaa,0x3c,0xff,0xff,0xaa,0x1b,0x00,0x00,0xaa,0x3b,0x00,0x00,
/*0xa0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x01,
/*0xb0*/ 0x00,0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x32,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xc0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xd0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xe0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xf0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03
};

static unsigned char NVP6124_B4_30P[] = {
      // 0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0A,0x0B,0x0C,0x0D,0x0E,0x0F
/*0x00*/ 0x37,0x37,0x1b,0x05,0x00,0x07,0x00,0x09,0x00,0x00,0x08,0x06,0x00,0x46,0x00,0x00,
/*0x10*/ 0xaa,0x1c,0x18,0xff,0xaa,0x3c,0xff,0xff,0xaa,0x1b,0x00,0x00,0xaa,0x3b,0x00,0x00,
/*0x20*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x01,
/*0x30*/ 0x00,0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x32,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x40*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x50*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x60*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x70*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x80*/ 0x37,0x37,0x1b,0x05,0x00,0x07,0x00,0x09,0x00,0x00,0x08,0x06,0x00,0x46,0x00,0x00,
/*0x90*/ 0xaa,0x1c,0x18,0xff,0xaa,0x3c,0xff,0xff,0xaa,0x1b,0x00,0x00,0xaa,0x3b,0x00,0x00,
/*0xa0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x01,
/*0xb0*/ 0x00,0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x32,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xc0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xd0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xe0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xf0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04
};

static unsigned char NVP6124_B5_30P[] = {
      // 0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0A,0x0B,0x0C,0x0D,0x0E,0x0F
/*0x00*/ 0xC0,0x0c,0x0c,0x1f,0x00,0x24,0x40,0x80,0x50,0x38,0x0f,0x00,0x04,0x10,0x30,0x00,
/*0x10*/ 0x06,0x06,0x00,0x80,0x37,0x80,0x49,0x37,0xef,0xdf,0xdf,0x08,0x50,0x0c,0x01,0x88,
/*0x20*/ 0x84,0x20,0x23,0x00,0x2a,0xdc,0xf0,0x57,0x90,0x70,0x52,0x78,0x00,0x68,0x00,0x07,
/*0x30*/ 0xe0,0x43,0xa2,0x00,0x00,0x15,0x25,0x00,0x00,0x02,0x02,0x00,0x00,0x00,0x00,0x00,
/*0x40*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x00,0x44,0xaa,0x00,0x00,0x00,0x00,0x00,
/*0x50*/ 0x84,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x03,0x01,0x00,0x00,0x00,0x00,0x00,0x30,
/*0x60*/ 0x53,0x53,0x20,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x70*/ 0xc0,0x01,0x06,0x06,0x11,0x00,0x01,0x81,0x01,0x01,0x01,0x81,0x01,0x01,0x00,0x00,
/*0x80*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x90*/ 0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x48,0x84,0x00,0x80,0x00,0x00,0x00,0x00,
/*0xa0*/ 0x10,0x30,0x0c,0x50,0x10,0x34,0x70,0x5C,0x20,0x20,0x30,0x40,0x20,0x20,0x14,0xA0,
/*0xb0*/ 0x40,0x50,0x0e,0x00,0x00,0x80,0x00,0x00,0x38,0xb2,0x05,0x00,0xa0,0x00,0x00,0x00,
/*0xc0*/ 0x17,0x14,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xd0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xe0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xf0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x05
};

//static unsigned char NVP6124_B6_30P[] = {
      // 0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0A,0x0B,0x0C,0x0D,0x0E,0x0F
///*0x00*/ 0xC0,0x0e,0x0c,0x1f,0x00,0x24,0x40,0x80,0x50,0x38,0x0f,0x00,0x04,0x10,0x30,0x00,
///*0x10*/ 0x06,0x06,0x00,0x80,0x37,0x80,0x49,0x37,0xef,0xdf,0xdf,0x08,0x50,0x0c,0x01,0x88,
///*0x20*/ 0x84,0x20,0x23,0x00,0x2a,0xdd,0xf0,0x57,0x90,0x70,0x52,0x78,0x00,0x68,0x00,0x07,
///*0x30*/ 0xe0,0x43,0xa2,0x00,0x00,0x15,0x25,0x00,0x00,0x02,0x02,0x00,0x00,0x00,0x00,0x00,
///*0x40*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x00,0x44,0xaa,0x00,0x00,0x00,0x00,0x00,
///*0x50*/ 0x04,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x03,0x01,0x00,0x00,0x00,0x00,0x00,0x30,
///*0x60*/ 0x53,0x53,0x20,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0x70*/ 0xc0,0x01,0x06,0x06,0x11,0x00,0x01,0x81,0x01,0x01,0x01,0x81,0x01,0x01,0x00,0x00,
///*0x80*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0x90*/ 0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x48,0x84,0x00,0x80,0x00,0x00,0x00,0x00,
///*0xa0*/ 0x10,0x30,0x0c,0x50,0x10,0x34,0x70,0x5C,0x20,0x20,0x30,0x40,0x20,0x20,0x14,0xA0,
///*0xb0*/ 0x40,0x50,0x0e,0x00,0x00,0x80,0x00,0x00,0x38,0xb2,0x05,0x00,0xa0,0x00,0x00,0x00,
///*0xc0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0xd0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0xe0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0xf0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x06
//};

//static unsigned char NVP6124_B7_30P[] = {
      // 0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0A,0x0B,0x0C,0x0D,0x0E,0x0F
///*0x00*/ 0xc0,0x0e,0x0c,0x1f,0x00,0x24,0x40,0x80,0x50,0x38,0x0f,0x00,0x04,0x10,0x30,0x00,
///*0x10*/ 0x06,0x06,0x00,0x80,0x37,0x80,0x49,0x37,0xef,0xdf,0xdf,0x08,0x50,0x0c,0x01,0x88,
///*0x20*/ 0x84,0x20,0x23,0x00,0x2a,0xdd,0xf0,0x57,0x90,0x70,0x52,0x78,0x00,0x68,0x00,0x07,
///*0x30*/ 0xe0,0x43,0xa2,0x00,0x00,0x15,0x25,0x00,0x00,0x02,0x02,0x00,0x00,0x00,0x00,0x00,
///*0x40*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x00,0x44,0xaa,0x00,0x00,0x00,0x00,0x00,
///*0x50*/ 0x04,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x03,0x01,0x00,0x00,0x00,0x00,0x00,0x30,
///*0x60*/ 0x53,0x53,0x20,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0x70*/ 0xc0,0x01,0x06,0x06,0x11,0x00,0x01,0x81,0x01,0x01,0x01,0x81,0x01,0x01,0x00,0x00,
///*0x80*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0x90*/ 0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x48,0x84,0x00,0x80,0x00,0x00,0x00,0x00,
///*0xa0*/ 0x10,0x30,0x0c,0x50,0x10,0x34,0x70,0x5C,0x20,0x20,0x30,0x40,0x20,0x20,0x14,0xA0,
///*0xb0*/ 0x40,0x50,0x0e,0x00,0x00,0x80,0x00,0x00,0x38,0xb2,0x05,0x00,0xa0,0x00,0x00,0x00,
///*0xc0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0xd0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0xe0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0xf0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x07
//};

//static unsigned char NVP6124_B8_30P[] = {
      // 0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0A,0x0B,0x0C,0x0D,0x0E,0x0F
///*0x00*/ 0xc0,0x0e,0x0c,0x1f,0x00,0x24,0x40,0x80,0x50,0x38,0x0f,0x00,0x04,0x10,0x30,0x00,
///*0x10*/ 0x06,0x06,0x00,0x80,0x37,0x80,0x49,0x37,0xef,0xdf,0xdf,0x08,0x50,0x0c,0x01,0x88,
///*0x20*/ 0x84,0x20,0x23,0x00,0x2a,0xdd,0xf0,0x57,0x90,0x70,0x52,0x78,0x00,0x68,0x00,0x07,
///*0x30*/ 0xe0,0x43,0xa2,0x00,0x00,0x15,0x25,0x00,0x00,0x02,0x02,0x00,0x00,0x00,0x00,0x00,
///*0x40*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x00,0x44,0xaa,0x00,0x00,0x00,0x00,0x00,
///*0x50*/ 0x04,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x03,0x01,0x00,0x00,0x00,0x00,0x00,0x30,
///*0x60*/ 0x53,0x53,0x20,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0x70*/ 0xc0,0x01,0x06,0x06,0x11,0x00,0x01,0x81,0x01,0x01,0x01,0x81,0x01,0x01,0x00,0x00,
///*0x80*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0x90*/ 0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x48,0x84,0x00,0x80,0x00,0x00,0x00,0x00,
///*0xa0*/ 0x10,0x30,0x0c,0x50,0x10,0x34,0x70,0x5C,0x20,0x20,0x30,0x40,0x20,0x20,0x14,0xA0,
///*0xb0*/ 0x40,0x50,0x0e,0x00,0x00,0x80,0x00,0x00,0x38,0xb2,0x05,0x00,0xa0,0x00,0x00,0x00,
///*0xc0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0xd0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0xe0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0xf0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x08
//};

static unsigned char NVP6124_B9_30P[] = {
      // 0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0A,0x0B,0x0C,0x0D,0x0E,0x0F
/*0x00*/ 0x02,0x04,0x06,0x08,0x0c,0x10,0x14,0x18,0x1c,0x20,0x28,0x30,0x38,0x40,0x48,0x50,
/*0x10*/ 0x58,0x60,0x68,0x70,0x78,0x7f,0x87,0x8f,0x97,0x9f,0xaf,0xbf,0xcf,0xdf,0xef,0xff,
/*0x20*/ 0x01,0x03,0x05,0x07,0x0b,0x0f,0x13,0x17,0x1b,0x1f,0x27,0x2f,0x37,0x3f,0x47,0x4f,
/*0x30*/ 0x57,0x5f,0x67,0x6f,0x77,0x7f,0x87,0x8f,0x97,0x9f,0xaf,0xbf,0xcf,0xdf,0xef,0xff,
/*0x40*/ 0x00,0x00,0x00,0x00,0x0f,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x50*/ 0xee,0x00,0xe5,0x4e,0xee,0x00,0xe5,0x4e,0xee,0x00,0xe5,0x4e,0xee,0x00,0xe5,0x4e,
/*0x60*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x70*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x80*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x90*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xa0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xb0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xc0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xd0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xe0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xf0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x09
};

static unsigned char NVP6124_BA_30P[] = {
      // 0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0A,0x0B,0x0C,0x0D,0x0E,0x0F
/*0x00*/ 0x00,0x00,0x02,0x80,0x04,0x04,0x08,0x04,0x0C,0x00,0x08,0x0E,0x80,0x20,0x0A,0x08,
/*0x10*/ 0x30,0x42,0x80,0x0A,0x7A,0x88,0x6C,0x5E,0x18,0x1F,0x8E,0x94,0xC7,0xA3,0xA0,0x0A,
/*0x20*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x02,0x01,0x00,0x01,0x03,0xA0,0x04,0x03,
/*0x30*/ 0x03,0x0B,0x0A,0x11,0x0D,0x06,0x27,0x00,0x4E,0x6D,0x74,0x00,0x00,0x00,0x00,0x00,
/*0x40*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x50*/ 0x01,0x05,0x87,0x0B,0x01,0x05,0x87,0x0B,0x8E,0x11,0x64,0x00,0x00,0x00,0x00,0x00,
/*0x60*/ 0x02,0x01,0x00,0x01,0x03,0xA0,0x04,0x03,0x03,0x0B,0x0A,0x11,0x0D,0x06,0x27,0x00,
/*0x70*/ 0x4E,0x6D,0x74,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x80*/ 0x00,0x00,0x02,0x80,0x04,0x04,0x08,0x04,0x0C,0x00,0x08,0x0E,0x80,0x20,0x0A,0x08,
/*0x90*/ 0x30,0x42,0x80,0x0A,0x7A,0x88,0x6C,0x5E,0x18,0x1F,0x8E,0x94,0xC7,0xA3,0xA0,0x0A,
/*0xa0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x02,0x01,0x00,0x01,0x03,0xA0,0x04,0x03,
/*0xb0*/ 0x03,0x0B,0x0A,0x11,0x0D,0x06,0x27,0x00,0x4E,0x6D,0x74,0x00,0x00,0x00,0x00,0x00,
/*0xc0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xd0*/ 0x01,0x05,0x87,0x0B,0x01,0x05,0x87,0x0B,0x8E,0x11,0x64,0x00,0x00,0x00,0x00,0x00,
/*0xe0*/ 0x02,0x01,0x00,0x01,0x03,0xA0,0x04,0x03,0x03,0x0B,0x0A,0x11,0x0D,0x06,0x27,0x00,
/*0xf0*/ 0x4E,0x6D,0x74,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0A
};

static unsigned char NVP6124_BB_30P[] = {
      // 0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0A,0x0B,0x0C,0x0D,0x0E,0x0F
/*0x00*/ 0x00,0x00,0x02,0x80,0x04,0x04,0x08,0x04,0x0C,0x00,0x08,0x0E,0x80,0x20,0x0A,0x08,
/*0x10*/ 0x30,0x42,0x80,0x0A,0x7A,0x88,0x6C,0x5E,0x18,0x1F,0x8E,0x94,0xC7,0xA3,0xA0,0x0A,
/*0x20*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x02,0x01,0x00,0x01,0x03,0xA0,0x04,0x03,
/*0x30*/ 0x03,0x0B,0x0A,0x11,0x0D,0x06,0x27,0x00,0x4E,0x6D,0x74,0x00,0x00,0x00,0x00,0x00,
/*0x40*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x50*/ 0x01,0x05,0x87,0x0B,0x01,0x05,0x87,0x0B,0x8E,0x11,0x64,0x00,0x00,0x00,0x00,0x00,
/*0x60*/ 0x02,0x01,0x00,0x01,0x03,0xA0,0x04,0x03,0x03,0x0B,0x0A,0x11,0x0D,0x06,0x27,0x00,
/*0x70*/ 0x4E,0x6D,0x74,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x80*/ 0x00,0x00,0x02,0x80,0x04,0x04,0x08,0x04,0x0C,0x00,0x08,0x0E,0x80,0x20,0x0A,0x08,
/*0x90*/ 0x30,0x42,0x80,0x0A,0x7A,0x88,0x6C,0x5E,0x18,0x1F,0x8E,0x94,0xC7,0xA3,0xA0,0x0A,
/*0xa0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x02,0x01,0x00,0x01,0x03,0xA0,0x04,0x03,
/*0xb0*/ 0x03,0x0B,0x0A,0x11,0x0D,0x06,0x27,0x00,0x4E,0x6D,0x74,0x00,0x00,0x00,0x00,0x00,
/*0xc0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xd0*/ 0x01,0x05,0x87,0x0B,0x01,0x05,0x87,0x0B,0x8E,0x11,0x64,0x00,0x00,0x00,0x00,0x00,
/*0xe0*/ 0x02,0x01,0x00,0x01,0x03,0xA0,0x04,0x03,0x03,0x0B,0x0A,0x11,0x0D,0x06,0x27,0x00,
/*0xf0*/ 0x4E,0x6D,0x74,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0B
};

/***************************************************************************************
 * AHD 25P Common
 ***************************************************************************************/
static unsigned char NVP6124_B0_25P[] = {
      // 0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0A,0x0B,0x0C,0x0D,0x0E,0x0F
/*0x00*/ 0x00,0x00,0x20,0x03,0x00,0x00,0x00,0x00,0x60,0x60,0x60,0x60,0x08,0x08,0x08,0x08,
/*0x10*/ 0x80,0x80,0x80,0x80,0x90,0x90,0x90,0x90,0x00,0x00,0x00,0x00,0xaf,0xaf,0xaf,0xaf,
/*0x20*/ 0x2f,0x92,0x0b,0x43,0x2f,0x92,0x0b,0x43,0x2f,0x92,0x0b,0x43,0x2f,0x92,0x0b,0x43,
/*0x30*/ 0x17,0x17,0x17,0x17,0x02,0x02,0x02,0x02,0x0a,0x0a,0x0a,0x0a,0x80,0x80,0x80,0x80,
/*0x40*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x50*/ 0x00,0x00,0x00,0x00,0x01,0x10,0x10,0x00,0x64,0x64,0x64,0x64,0x9e,0x9e,0x9e,0x9e,
/*0x60*/ 0x00,0x00,0x00,0x00,0x8d,0x8d,0x8d,0x8d,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x70*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x88,0x88,0x11,0x11,0x00,0x00,0x00,0x00,
/*0x80*/ 0x00,0x77,0x77,0x33,0x33,0x00,0x00,0x00,0x00,0x00,0x00,0x11,0x11,0xaa,0xaa,0x00,
/*0x90*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x16,0x16,0x16,0x16,0x00,0x00,0x00,0x00,
/*0xa0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x11,0x11,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xb0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xc0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xd0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xe0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x90,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xf0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
};

static unsigned char NVP6124_B1_25P[] = {
      // 0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0A,0x0B,0x0C,0x0D,0x0E,0x0F
/*0x00*/ 0x02,0x0f,0x0f,0x0f,0x0f,0x0f,0x1b,0xc8,0x03,0x00,0x10,0x32,0x54,0x76,0x00,0x98,
/*0x10*/ 0xba,0xdc,0xfe,0x08,0x00,0x00,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,0x88,
/*0x20*/ 0x88,0x88,0x03,0x19,0x18,0x16,0x00,0x00,0x00,0x88,0xff,0x40,0xaa,0xaa,0xaa,0xaa,
/*0x30*/ 0xaa,0x82,0x00,0x00,0x00,0x8C,0xA0,0x00,0x18,0x01,0x80,0x30,0x00,0x00,0x80,0x00,
/*0x40*/ 0x0f,0x0f,0x0f,0x0f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x50*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x60*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x70*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x80*/ 0x60,0x00,0x14,0x2C,0x00,0x00,0x00,0x00,0x44,0x44,0xdd,0xdd,0x11,0x11,0x55,0x55,
/*0x90*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xa0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xb0*/ 0x00,0x00,0x00,0x00,0x40,0x30,0x40,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xc0*/ 0x22,0x22,0x33,0x33,0x00,0x00,0x11,0x11,0x00,0x00,0xff,0x00,0x30,0x30,0x30,0x30,
/*0xd0*/ 0x00,0x00,0x00,0xf0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xe0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xf0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01
};

static unsigned char NVP6124_B2_25P[] = {
      // 0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0A,0x0B,0x0C,0x0D,0x0E,0x0F
/*0x00*/ 0x03,0x60,0x03,0x60,0x03,0x60,0x03,0x60,0x03,0x60,0x03,0x60,0x03,0x60,0x03,0x60,
/*0x10*/ 0x00,0x00,0x0F,0x00,0xc0,0x00,0x55,0x55,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
/*0x20*/ 0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
/*0x30*/ 0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
/*0x40*/ 0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
/*0x50*/ 0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
/*0x60*/ 0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
/*0x70*/ 0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,
/*0x80*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x90*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xa0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xb0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xc0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xd0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xe0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xf0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x02
};

static unsigned char NVP6124_B3_25P[] = {
      // 0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0A,0x0B,0x0C,0x0D,0x0E,0x0F
/*0x00*/ 0x37,0x37,0x1b,0x05,0x00,0x07,0x00,0x09,0x00,0x00,0x08,0x06,0x00,0x46,0x00,0x00,
/*0x10*/ 0xaa,0x1c,0x18,0xff,0xaa,0x3c,0xff,0xff,0xaa,0x1b,0x00,0x00,0xaa,0x3b,0x00,0x00,
/*0x20*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x01,
/*0x30*/ 0x00,0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x32,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x40*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x50*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x60*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x70*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x80*/ 0x37,0x37,0x1b,0x05,0x00,0x07,0x00,0x09,0x00,0x00,0x08,0x06,0x00,0x46,0x00,0x00,
/*0x90*/ 0xaa,0x1c,0x18,0xff,0xaa,0x3c,0xff,0xff,0xaa,0x1b,0x00,0x00,0xaa,0x3b,0x00,0x00,
/*0xa0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x01,
/*0xb0*/ 0x00,0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x32,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xc0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xd0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xe0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xf0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03
};

static unsigned char NVP6124_B4_25P[] = {
      // 0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0A,0x0B,0x0C,0x0D,0x0E,0x0F
/*0x00*/ 0x37,0x37,0x1b,0x05,0x00,0x07,0x00,0x09,0x00,0x00,0x08,0x06,0x00,0x46,0x00,0x00,
/*0x10*/ 0xaa,0x1c,0x18,0xff,0xaa,0x3c,0xff,0xff,0xaa,0x1b,0x00,0x00,0xaa,0x3b,0x00,0x00,
/*0x20*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x01,
/*0x30*/ 0x00,0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x32,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x40*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x50*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x60*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x70*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x80*/ 0x37,0x37,0x1b,0x05,0x00,0x07,0x00,0x09,0x00,0x00,0x08,0x06,0x00,0x46,0x00,0x00,
/*0x90*/ 0xaa,0x1c,0x18,0xff,0xaa,0x3c,0xff,0xff,0xaa,0x1b,0x00,0x00,0xaa,0x3b,0x00,0x00,
/*0xa0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x01,
/*0xb0*/ 0x00,0xff,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x32,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xc0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xd0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xe0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xf0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04
};

static unsigned char NVP6124_B5_25P[] = {
      // 0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0A,0x0B,0x0C,0x0D,0x0E,0x0F
/*0x00*/ 0xC0,0x0e,0x0c,0x1f,0x00,0x24,0x40,0x80,0x50,0x38,0x0f,0x00,0x04,0x10,0x30,0x00,
/*0x10*/ 0x06,0x06,0x00,0x80,0x37,0x80,0x49,0x37,0xef,0xdf,0xdf,0x08,0x50,0x0c,0x00,0x88,
/*0x20*/ 0x84,0x20,0x23,0x00,0x2a,0xdc,0xf0,0x57,0x90,0x70,0x52,0x78,0x00,0x68,0x00,0x07,
/*0x30*/ 0xe0,0x43,0xa2,0x00,0x00,0x17,0x25,0x00,0x00,0x02,0x02,0x00,0x00,0x00,0x00,0x00,
/*0x40*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x00,0x44,0xaa,0x00,0x00,0x00,0x00,0x00,
/*0x50*/ 0x84,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x03,0x01,0x00,0x00,0x00,0x00,0x00,0x30,
/*0x60*/ 0x53,0x53,0x20,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x70*/ 0xc0,0x01,0x06,0x06,0x11,0x00,0x01,0x81,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x80*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x90*/ 0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x48,0x84,0x00,0x80,0x00,0x00,0x00,0x00,
/*0xa0*/ 0x10,0x10,0x0e,0x70,0x10,0x34,0x70,0x5c,0x40,0x20,0x30,0x40,0x10,0x08,0x04,0xa0,
/*0xb0*/ 0x40,0x50,0x0e,0x00,0x00,0x80,0x00,0x00,0x38,0xb2,0x05,0x00,0xa0,0x00,0x00,0x00,
/*0xc0*/ 0x17,0x14,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xd0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xe0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xf0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x05
};

//static unsigned char NVP6124_B6_25P[] = {
      // 0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0A,0x0B,0x0C,0x0D,0x0E,0x0F
///*0x00*/ 0xc0,0x0e,0x0c,0x1f,0x00,0x24,0x40,0x80,0x50,0x38,0x0f,0x00,0x04,0x10,0x30,0x00,
///*0x10*/ 0x06,0x06,0x00,0x80,0x37,0x80,0x49,0x37,0xef,0xdf,0xdf,0x08,0x50,0x0c,0x00,0x88,
///*0x20*/ 0x84,0x20,0x23,0x00,0x2a,0xdc,0xf0,0x57,0x90,0x70,0x52,0x78,0x00,0x68,0x00,0x07,
///*0x30*/ 0xe0,0x43,0xa2,0x00,0x00,0x17,0x25,0x00,0x00,0x02,0x02,0x00,0x00,0x00,0x00,0x00,
///*0x40*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x00,0x44,0xaa,0x00,0x00,0x00,0x00,0x00,
///*0x50*/ 0x04,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x03,0x01,0x00,0x00,0x00,0x00,0x00,0x30,
///*0x60*/ 0x53,0x53,0x20,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0x70*/ 0xc0,0x01,0x06,0x06,0x11,0x00,0x01,0x81,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,
///*0x80*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0x90*/ 0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x48,0x84,0x00,0x80,0x00,0x00,0x00,0x00,
///*0xa0*/ 0x10,0x10,0x0e,0x70,0x10,0x34,0x70,0x5c,0x40,0x20,0x30,0x40,0x10,0x08,0x04,0xa0,
///*0xb0*/ 0x40,0x50,0x0e,0x00,0x00,0x80,0x00,0x00,0x38,0xb2,0x05,0x00,0xa0,0x00,0x00,0x00,
///*0xc0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0xd0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0xe0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0xf0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x06
//};

//static unsigned char NVP6124_B7_25P[] = {
      // 0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0A,0x0B,0x0C,0x0D,0x0E,0x0F
///*0x00*/ 0xc0,0x0e,0x0c,0x1f,0x00,0x24,0x40,0x80,0x50,0x38,0x0f,0x00,0x04,0x10,0x30,0x00,
///*0x10*/ 0x06,0x06,0x00,0x80,0x37,0x80,0x49,0x37,0xef,0xdf,0xdf,0x08,0x50,0x0c,0x00,0x88,
///*0x20*/ 0x84,0x20,0x23,0x00,0x2a,0xdc,0xf0,0x57,0x90,0x70,0x52,0x78,0x00,0x68,0x00,0x07,
///*0x30*/ 0xe0,0x43,0xa2,0x00,0x00,0x17,0x25,0x00,0x00,0x02,0x02,0x00,0x00,0x00,0x00,0x00,
///*0x40*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x00,0x44,0xaa,0x00,0x00,0x00,0x00,0x00,
///*0x50*/ 0x04,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x03,0x01,0x00,0x00,0x00,0x00,0x00,0x30,
///*0x60*/ 0x53,0x53,0x20,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0x70*/ 0xc0,0x01,0x06,0x06,0x11,0x00,0x01,0x81,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,
///*0x80*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0x90*/ 0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x48,0x84,0x00,0x80,0x00,0x00,0x00,0x00,
///*0xa0*/ 0x10,0x10,0x0e,0x70,0x10,0x34,0x70,0x5c,0x40,0x20,0x30,0x40,0x10,0x08,0x04,0xa0,
///*0xb0*/ 0x40,0x50,0x0e,0x00,0x00,0x80,0x00,0x00,0x38,0xb2,0x05,0x00,0xa0,0x00,0x00,0x00,
///*0xc0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0xd0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0xe0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0xf0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x07
//};

//static unsigned char NVP6124_B8_25P[] = {
      // 0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0A,0x0B,0x0C,0x0D,0x0E,0x0F
///*0x00*/ 0xc0,0x0e,0x0c,0x1f,0x00,0x24,0x40,0x80,0x50,0x38,0x0f,0x00,0x04,0x10,0x30,0x00,
///*0x10*/ 0x06,0x06,0x00,0x80,0x37,0x80,0x49,0x37,0xef,0xdf,0xdf,0x08,0x50,0x0c,0x00,0x88,
///*0x20*/ 0x84,0x20,0x23,0x00,0x2a,0xdc,0xf0,0x57,0x90,0x70,0x52,0x78,0x00,0x68,0x00,0x07,
///*0x30*/ 0xe0,0x43,0xa2,0x00,0x00,0x17,0x25,0x00,0x00,0x02,0x02,0x00,0x00,0x00,0x00,0x00,
///*0x40*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x00,0x44,0xaa,0x00,0x00,0x00,0x00,0x00,
///*0x50*/ 0x04,0xff,0xff,0x00,0x00,0x00,0x00,0x00,0x03,0x01,0x00,0x00,0x00,0x00,0x00,0x30,
///*0x60*/ 0x53,0x53,0x20,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0x70*/ 0xc0,0x01,0x06,0x06,0x11,0x00,0x01,0x81,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,
///*0x80*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0x90*/ 0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x48,0x84,0x00,0x80,0x00,0x00,0x00,0x00,
///*0xa0*/ 0x10,0x10,0x0e,0x70,0x10,0x34,0x70,0x5c,0x40,0x20,0x30,0x40,0x10,0x08,0x04,0xa0,
///*0xb0*/ 0x40,0x50,0x0e,0x00,0x00,0x80,0x00,0x00,0x38,0xb2,0x05,0x00,0xa0,0x00,0x00,0x00,
///*0xc0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0xd0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0xe0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0xf0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x08
//};

static unsigned char NVP6124_B9_25P[] = {
      // 0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0A,0x0B,0x0C,0x0D,0x0E,0x0F
/*0x00*/ 0x02,0x04,0x06,0x08,0x0c,0x10,0x14,0x18,0x1c,0x20,0x28,0x30,0x38,0x40,0x48,0x50,
/*0x10*/ 0x58,0x60,0x68,0x70,0x78,0x7f,0x87,0x8f,0x97,0x9f,0xaf,0xbf,0xcf,0xdf,0xef,0xff,
/*0x20*/ 0x01,0x03,0x05,0x07,0x0b,0x0f,0x13,0x17,0x1b,0x1f,0x27,0x2f,0x37,0x3f,0x47,0x4f,
/*0x30*/ 0x57,0x5f,0x67,0x6f,0x77,0x7f,0x87,0x8f,0x97,0x9f,0xaf,0xbf,0xcf,0xdf,0xef,0xff,
/*0x40*/ 0x00,0x00,0x00,0x00,0x0f,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x50*/ 0x46,0x08,0x10,0x4f,0x46,0x08,0x10,0x4f,0x46,0x08,0x10,0x4f,0x46,0x08,0x10,0x4f,
/*0x60*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x70*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x80*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x90*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xa0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xb0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xc0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xd0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xe0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xf0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x09
};

static unsigned char NVP6124_BA_25P[] = {
      // 0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0A,0x0B,0x0C,0x0D,0x0E,0x0F
/*0x00*/ 0x00,0x00,0x02,0x80,0x04,0x04,0x08,0x04,0x0C,0x00,0x08,0x0E,0x80,0x20,0x0A,0x08,
/*0x10*/ 0x30,0x42,0x80,0x0A,0x7A,0x88,0x6C,0x5E,0x18,0x1F,0x8E,0x94,0xC7,0xA3,0xA0,0x0A,
/*0x20*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x02,0x01,0x00,0x01,0x03,0xA0,0x04,0x03,
/*0x30*/ 0x03,0x0B,0x0A,0x11,0x0D,0x06,0x27,0x00,0x4E,0x6D,0x74,0x00,0x00,0x00,0x00,0x00,
/*0x40*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x50*/ 0x01,0x05,0x87,0x0B,0x01,0x05,0x87,0x0B,0x8E,0x11,0x64,0x00,0x00,0x00,0x00,0x00,
/*0x60*/ 0x02,0x01,0x00,0x01,0x03,0xA0,0x04,0x03,0x03,0x0B,0x0A,0x11,0x0D,0x06,0x27,0x00,
/*0x70*/ 0x4E,0x6D,0x74,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x80*/ 0x00,0x00,0x02,0x80,0x04,0x04,0x08,0x04,0x0C,0x00,0x08,0x0E,0x80,0x20,0x0A,0x08,
/*0x90*/ 0x30,0x42,0x80,0x0A,0x7A,0x88,0x6C,0x5E,0x18,0x1F,0x8E,0x94,0xC7,0xA3,0xA0,0x0A,
/*0xa0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x02,0x01,0x00,0x01,0x03,0xA0,0x04,0x03,
/*0xb0*/ 0x03,0x0B,0x0A,0x11,0x0D,0x06,0x27,0x00,0x4E,0x6D,0x74,0x00,0x00,0x00,0x00,0x00,
/*0xc0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xd0*/ 0x01,0x05,0x87,0x0B,0x01,0x05,0x87,0x0B,0x8E,0x11,0x64,0x00,0x00,0x00,0x00,0x00,
/*0xe0*/ 0x02,0x01,0x00,0x01,0x03,0xA0,0x04,0x03,0x03,0x0B,0x0A,0x11,0x0D,0x06,0x27,0x00,
/*0xf0*/ 0x4E,0x6D,0x74,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0A
};

static unsigned char NVP6124_BB_25P[] = {
      // 0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0A,0x0B,0x0C,0x0D,0x0E,0x0F
/*0x00*/ 0x00,0x00,0x02,0x80,0x04,0x04,0x08,0x04,0x0C,0x00,0x08,0x0E,0x80,0x20,0x0A,0x08,
/*0x10*/ 0x30,0x42,0x80,0x0A,0x7A,0x88,0x6C,0x5E,0x18,0x1F,0x8E,0x94,0xC7,0xA3,0xA0,0x0A,
/*0x20*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x02,0x01,0x00,0x01,0x03,0xA0,0x04,0x03,
/*0x30*/ 0x03,0x0B,0x0A,0x11,0x0D,0x06,0x27,0x00,0x4E,0x6D,0x74,0x00,0x00,0x00,0x00,0x00,
/*0x40*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x50*/ 0x01,0x05,0x87,0x0B,0x01,0x05,0x87,0x0B,0x8E,0x11,0x64,0x00,0x00,0x00,0x00,0x00,
/*0x60*/ 0x02,0x01,0x00,0x01,0x03,0xA0,0x04,0x03,0x03,0x0B,0x0A,0x11,0x0D,0x06,0x27,0x00,
/*0x70*/ 0x4E,0x6D,0x74,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x80*/ 0x00,0x00,0x02,0x80,0x04,0x04,0x08,0x04,0x0C,0x00,0x08,0x0E,0x80,0x20,0x0A,0x08,
/*0x90*/ 0x30,0x42,0x80,0x0A,0x7A,0x88,0x6C,0x5E,0x18,0x1F,0x8E,0x94,0xC7,0xA3,0xA0,0x0A,
/*0xa0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x02,0x01,0x00,0x01,0x03,0xA0,0x04,0x03,
/*0xb0*/ 0x03,0x0B,0x0A,0x11,0x0D,0x06,0x27,0x00,0x4E,0x6D,0x74,0x00,0x00,0x00,0x00,0x00,
/*0xc0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xd0*/ 0x01,0x05,0x87,0x0B,0x01,0x05,0x87,0x0B,0x8E,0x11,0x64,0x00,0x00,0x00,0x00,0x00,
/*0xe0*/ 0x02,0x01,0x00,0x01,0x03,0xA0,0x04,0x03,0x03,0x0B,0x0A,0x11,0x0D,0x06,0x27,0x00,
/*0xf0*/ 0x4E,0x6D,0x74,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0B
};

/***************************************************************************************
 * SD NTSC Common
 ***************************************************************************************/
//static unsigned char NVP6124_B0_NTSC[] = {
      // 0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0A,0x0B,0x0C,0x0D,0x0E,0x0F
///*0x00*/ 0x00,0x00,0x00,0x00,0x00,0x00,0xAF,0x00,0xA0,0xA0,0xA0,0xA0,0xfe,0xfe,0xfe,0xfe,
///*0x10*/ 0x84,0x84,0x84,0x84,0x80,0x80,0x80,0x80,0x28,0x28,0x28,0x28,0xaf,0xaf,0xaf,0xaf,
///*0x20*/ 0x2f,0x92,0x0b,0x43,0x2f,0x92,0x0b,0x43,0x2f,0x92,0x0b,0x43,0x2f,0x92,0x0b,0x43,
///*0x30*/ 0x12,0x12,0x12,0x12,0x04,0x04,0x04,0x04,0x0A,0x0A,0x0A,0x0A,0xa0,0xa0,0xa0,0xa0,
///*0x40*/ 0x01,0x01,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0x50*/ 0x00,0x00,0x00,0x00,0xF1,0x10,0x32,0x00,0x80,0x80,0x80,0x80,0x1E,0x1E,0x1E,0x1E,
///*0x60*/ 0x00,0x00,0x00,0x00,0x08,0x08,0x08,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0x70*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x88,0x88,0x11,0x11,0x00,0x00,0x00,0x00,
///*0x80*/ 0x00,0x00,0x00,0x00,0x00,0x11,0x11,0x11,0x11,0x00,0x00,0x00,0x00,0x00,0x07,0x07,
///*0x90*/ 0x07,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x16,0x16,0x16,0x16,0x00,0x00,0x00,0x00,
///*0xa0*/ 0x10,0x10,0x10,0x10,0x01,0x01,0x01,0x01,0x11,0x11,0x00,0x00,0x00,0x00,0x00,0x00,
///*0xb0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0xc0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0xd0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0xe0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x90,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0xf0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
//};

static unsigned char NVP6124_B5_NTSC[] = {
      // 0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0A,0x0B,0x0C,0x0D,0x0E,0x0F
/*0x00*/ 0xC0,0x0E,0x0C,0x1F,0x00,0x20,0x40,0x80,0x50,0x38,0x0F,0x00,0x04,0x10,0x30,0x00,
/*0x10*/ 0x06,0x04,0x00,0x80,0x37,0x80,0x49,0x37,0xEF,0xDF,0xDF,0x20,0x50,0x0C,0xFF,0x88,
/*0x20*/ 0x90,0x20,0x23,0x00,0x2A,0xDC,0xF0,0x57,0x90,0x1f,0x52,0x78,0x04,0x68,0x00,0x07,
/*0x30*/ 0xE0,0x43,0xA2,0x00,0x00,0x15,0x25,0x00,0x00,0x02,0x02,0x00,0x00,0x00,0x00,0x00,
/*0x40*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x00,0x44,0xAA,0x00,0x00,0x00,0x00,0x00,
/*0x50*/ 0x84,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x60*/ 0x53,0x53,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x70*/ 0xC0,0x01,0x06,0x06,0x11,0x00,0x01,0x81,0x01,0x01,0x00,0x00,0x00,0x80,0x00,0x00,
/*0x80*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x3f,0xff,0xff,0xff,0x00,0x00,0x00,
/*0x90*/ 0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x48,0x84,0x00,0x80,0x00,0x00,0x00,0x00,
/*0xa0*/ 0x10,0x30,0x0c,0x50,0x10,0x34,0x70,0x5c,0x20,0x20,0x30,0x40,0x20,0x20,0x14,0x20,
/*0xb0*/ 0x40,0x50,0x0e,0x00,0x00,0x80,0x00,0x00,0x39,0xb2,0x05,0x00,0xa0,0x00,0x00,0x00,
/*0xc0*/ 0x00,0x13,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xd0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xe0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xf0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x05
};

/***************************************************************************************
 * SD PAL Common
 ***************************************************************************************/
//static unsigned char NVP6124_B0_PAL[] = {
      // 0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0A,0x0B,0x0C,0x0D,0x0E,0x0F
///*0x00*/ 0x00,0x00,0x20,0x00,0x00,0x00,0x00,0x00,0xDD,0xDD,0xDD,0xDD,0xF8,0xF8,0xF8,0xF8,
///*0x10*/ 0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x28,0x28,0x28,0x28,0xaf,0xaf,0xaf,0xaf,
///*0x20*/ 0x2f,0x02,0x0b,0x43,0x2f,0x02,0x0b,0x43,0x2f,0x02,0x0b,0x43,0x2f,0x02,0x0b,0x43,
///*0x30*/ 0x12,0x12,0x12,0x12,0x02,0x02,0x02,0x02,0x0a,0x0a,0x0a,0x0a,0x80,0x80,0x80,0x80,
///*0x40*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x04,0x04,0x04,
///*0x50*/ 0x04,0x04,0x04,0x04,0x01,0x10,0x32,0x00,0xA0,0xA0,0xA0,0xA0,0x1E,0x1E,0x1E,0x1E,
///*0x60*/ 0x00,0x00,0x00,0x00,0x0D,0x0D,0x0D,0x0D,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0x70*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x88,0x88,0x11,0x11,0x00,0x00,0x00,0x00,
///*0x80*/ 0x00,0x00,0x00,0x00,0x00,0x11,0x11,0x11,0x11,0x10,0x10,0x10,0x10,0x00,0x03,0x03,
///*0x90*/ 0x03,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x16,0x16,0x16,0x16,0x00,0x00,0x00,0x00,
///*0xa0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x11,0x11,0x00,0x00,0x00,0x00,0x00,0x00,
///*0xb0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0xc0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0xd0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0xe0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x90,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
///*0xf0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
//};

static unsigned char NVP6124_B5_PAL[] = {
      // 0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0A,0x0B,0x0C,0x0D,0x0E,0x0F
/*0x00*/ 0xC0,0x0E,0x0C,0x1F,0x00,0x20,0x40,0x80,0x50,0x38,0x0F,0x00,0x04,0x10,0x30,0x13,
/*0x10*/ 0x06,0x04,0x00,0x80,0x37,0x80,0x49,0x37,0xEF,0xDF,0xDF,0x20,0x50,0x0C,0x00,0x88,
/*0x20*/ 0x90,0x20,0x23,0x00,0x2A,0xCC,0xF0,0x57,0x90,0x1f,0x52,0x78,0x00,0x68,0x00,0x07,
/*0x30*/ 0xE0,0x43,0xA2,0x00,0x00,0x17,0x25,0x00,0x00,0x02,0x02,0x00,0x00,0x00,0x00,0x00,
/*0x40*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x00,0x44,0xAA,0x00,0x00,0x00,0x00,0x00,
/*0x50*/ 0x84,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x60*/ 0x53,0x53,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x70*/ 0xC0,0x01,0x06,0x06,0x11,0x00,0x01,0x81,0x01,0x01,0x00,0x00,0x00,0x80,0x00,0x00,
/*0x80*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0x90*/ 0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x48,0x84,0x00,0x80,0x00,0x00,0x00,0x00,
/*0xa0*/ 0x10,0x10,0x0e,0x70,0x10,0x34,0x70,0x5c,0x40,0x20,0x30,0x40,0x10,0x08,0x04,0x20,
/*0xb0*/ 0x40,0x50,0x0e,0x00,0x00,0x80,0x00,0x00,0x39,0xb2,0x05,0x00,0xa0,0x00,0x00,0x00,
/*0xc0*/ 0x0d,0x13,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xd0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xe0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*0xf0*/ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x05
};

/*
static int nvp6124_software_reset(int id)
{
    int ret;

    if(id >= NVP6124_DEV_MAX)
        return -1;

    ret = nvp6124_i2c_write(id, 0xFF, 0x01); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0x80, 0x40); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0x81, 0x02); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0x80, 0x61); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0x81, 0x00); if(ret < 0) goto exit;
    msleep(100);
    ret = nvp6124_i2c_write(id, 0x80, 0x60); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0x81, 0x00); if(ret < 0) goto exit;
    msleep(100);

exit:
    return ret;
}
*/

static int nvp6124_system_init(int id)
{
    int ret;

    if(id >= NVP6124_DEV_MAX)
        return -1;

    ret = nvp6124_i2c_write(id, 0xFF, 0x01); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0x82, 0x14); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0x83, 0x2C); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0x3E, 0x10); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0x80, 0x60); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0x80, 0x61); if(ret < 0) goto exit;
    msleep(100);
    ret = nvp6124_i2c_write(id, 0x80, 0x40); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0x81, 0x02); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0x97, 0x00); if(ret < 0) goto exit;
    msleep(10);
    ret = nvp6124_i2c_write(id, 0x80, 0x60); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0x81, 0x00); if(ret < 0) goto exit;
    msleep(10);
    ret = nvp6124_i2c_write(id, 0x97, 0x0F); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0x38, 0x18); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0x38, 0x08); if(ret < 0) goto exit;
    msleep(100);

exit:
    return ret;
}

static int nvp6124_ntsc_common_init(int id)
{
    int ret;

    if(id >= NVP6124_DEV_MAX)
        return -1;

    /* BANK 0 */
    ret = nvp6124_i2c_write(id, 0xFF, 0x00);
    if(ret < 0)
        goto exit;
    ret = nvp6124_i2c_array_write(id, 0x00, NVP6124_B0_30P, sizeof(NVP6124_B0_30P));
    if(ret < 0)
        goto exit;

    /* BANK 1 */
    ret = nvp6124_i2c_write(id, 0xFF, 0x01);
    if(ret < 0)
        goto exit;
    ret = nvp6124_i2c_array_write(id, 0x00, NVP6124_B1_30P, sizeof(NVP6124_B1_30P));
    if(ret < 0)
        goto exit;

    /* BANK 2 */
    ret = nvp6124_i2c_write(id, 0xFF, 0x02);
    if(ret < 0)
        goto exit;
    ret = nvp6124_i2c_array_write(id, 0x00, NVP6124_B2_30P, sizeof(NVP6124_B2_30P));
    if(ret < 0)
        goto exit;

    /* BANK 3 */
    ret = nvp6124_i2c_write(id, 0xFF, 0x03);
    if(ret < 0)
        goto exit;
    ret = nvp6124_i2c_array_write(id, 0x00, NVP6124_B3_30P, sizeof(NVP6124_B3_30P));
    if(ret < 0)
        goto exit;

    /* BANK 4 */
    ret = nvp6124_i2c_write(id, 0xFF, 0x04);
    if(ret < 0)
        goto exit;
    ret = nvp6124_i2c_array_write(id, 0x00, NVP6124_B4_30P, sizeof(NVP6124_B4_30P));
    if(ret < 0)
        goto exit;

    /* BANK 5 */
/*    ret = nvp6124_i2c_write(id, 0xFF, 0x05);
    if(ret < 0)
        goto exit;
    ret = nvp6124_i2c_array_write(id, 0x00, NVP6124_B5_30P, sizeof(NVP6124_B5_30P));
    if(ret < 0)
        goto exit;
*/
    /* BANK 6 */
/*    ret = nvp6124_i2c_write(id, 0xFF, 0x06);
    if(ret < 0)
        goto exit;
    ret = nvp6124_i2c_array_write(id, 0x00, NVP6124_B6_30P, sizeof(NVP6124_B6_30P));
    if(ret < 0)
        goto exit;
*/
    /* BANK 7 */
/*    ret = nvp6124_i2c_write(id, 0xFF, 0x07);
    if(ret < 0)
        goto exit;
    ret = nvp6124_i2c_array_write(id, 0x00, NVP6124_B7_30P, sizeof(NVP6124_B7_30P));
    if(ret < 0)
        goto exit;
*/
    /* BANK 8 */
/*    ret = nvp6124_i2c_write(id, 0xFF, 0x08);
    if(ret < 0)
        goto exit;
    ret = nvp6124_i2c_array_write(id, 0x00, NVP6124_B8_30P, sizeof(NVP6124_B8_30P));
    if(ret < 0)
        goto exit;
*/
    /* BANK 9 */
    ret = nvp6124_i2c_write(id, 0xFF, 0x09);
    if(ret < 0)
        goto exit;
    ret = nvp6124_i2c_array_write(id, 0x00, NVP6124_B9_30P, sizeof(NVP6124_B9_30P));
    if(ret < 0)
        goto exit;

    /* BANK A */
    ret = nvp6124_i2c_write(id, 0xFF, 0x0A);
    if(ret < 0)
        goto exit;
    ret = nvp6124_i2c_array_write(id, 0x00, NVP6124_BA_30P, sizeof(NVP6124_BA_30P));
    if(ret < 0)
        goto exit;

    /* BANK B */
    ret = nvp6124_i2c_write(id, 0xFF, 0x0B);
    if(ret < 0)
        goto exit;
    ret = nvp6124_i2c_array_write(id, 0x00, NVP6124_BB_30P, sizeof(NVP6124_BB_30P));
    if(ret < 0)
        goto exit;

exit:
    return ret;
}

static int nvp6124_pal_common_init(int id)
{
    int ret;

    if(id >= NVP6124_DEV_MAX)
        return -1;

    /* BANK 0 */
    ret = nvp6124_i2c_write(id, 0xFF, 0x00);
    if(ret < 0)
        goto exit;
    ret = nvp6124_i2c_array_write(id, 0x00, NVP6124_B0_25P, sizeof(NVP6124_B0_25P));
    if(ret < 0)
        goto exit;

    /* BANK 1 */
    ret = nvp6124_i2c_write(id, 0xFF, 0x01);
    if(ret < 0)
        goto exit;
    ret = nvp6124_i2c_array_write(id, 0x00, NVP6124_B1_25P, sizeof(NVP6124_B1_25P));
    if(ret < 0)
        goto exit;

    /* BANK 2 */
    ret = nvp6124_i2c_write(id, 0xFF, 0x02);
    if(ret < 0)
        goto exit;
    ret = nvp6124_i2c_array_write(id, 0x00, NVP6124_B2_25P, sizeof(NVP6124_B2_25P));
    if(ret < 0)
        goto exit;

    /* BANK 3 */
    ret = nvp6124_i2c_write(id, 0xFF, 0x03);
    if(ret < 0)
        goto exit;
    ret = nvp6124_i2c_array_write(id, 0x00, NVP6124_B3_25P, sizeof(NVP6124_B3_25P));
    if(ret < 0)
        goto exit;

    /* BANK 4 */
    ret = nvp6124_i2c_write(id, 0xFF, 0x04);
    if(ret < 0)
        goto exit;
    ret = nvp6124_i2c_array_write(id, 0x00, NVP6124_B4_25P, sizeof(NVP6124_B4_25P));
    if(ret < 0)
        goto exit;

    /* BANK 5 */
/*    ret = nvp6124_i2c_write(id, 0xFF, 0x05);
    if(ret < 0)
        goto exit;
    ret = nvp6124_i2c_array_write(id, 0x00, NVP6124_B5_25P, sizeof(NVP6124_B5_25P));
    if(ret < 0)
        goto exit;
*/
    /* BANK 6 */
/*    ret = nvp6124_i2c_write(id, 0xFF, 0x06);
    if(ret < 0)
        goto exit;
    ret = nvp6124_i2c_array_write(id, 0x00, NVP6124_B6_25P, sizeof(NVP6124_B6_25P));
    if(ret < 0)
        goto exit;
*/
    /* BANK 7 */
/*    ret = nvp6124_i2c_write(id, 0xFF, 0x07);
    if(ret < 0)
        goto exit;
    ret = nvp6124_i2c_array_write(id, 0x00, NVP6124_B7_25P, sizeof(NVP6124_B7_25P));
    if(ret < 0)
        goto exit;
*/
    /* BANK 8 */
/*    ret = nvp6124_i2c_write(id, 0xFF, 0x08);
    if(ret < 0)
        goto exit;
    ret = nvp6124_i2c_array_write(id, 0x00, NVP6124_B8_25P, sizeof(NVP6124_B8_25P));
    if(ret < 0)
        goto exit;
*/
    /* BANK 9 */
    ret = nvp6124_i2c_write(id, 0xFF, 0x09);
    if(ret < 0)
        goto exit;
    ret = nvp6124_i2c_array_write(id, 0x00, NVP6124_B9_25P, sizeof(NVP6124_B9_25P));
    if(ret < 0)
        goto exit;

    /* BANK A */
    ret = nvp6124_i2c_write(id, 0xFF, 0x0A);
    if(ret < 0)
        goto exit;
    ret = nvp6124_i2c_array_write(id, 0x00, NVP6124_BA_25P, sizeof(NVP6124_BA_25P));
    if(ret < 0)
        goto exit;

    /* BANK B */
    ret = nvp6124_i2c_write(id, 0xFF, 0x0B);
    if(ret < 0)
        goto exit;
    ret = nvp6124_i2c_array_write(id, 0x00, NVP6124_BB_25P, sizeof(NVP6124_BB_25P));
    if(ret < 0)
        goto exit;

exit:
    return ret;
}

#define EQ_ADJ_COLOR
#define MAX_CHANNEL  16
volatile unsigned char stage_update[MAX_CHANNEL] = {[0 ... (MAX_CHANNEL - 1)] = 0};

unsigned char ANALOG_EQ_1080P[8]  = {0x13,0x03,0x53,0x73,0x73,0x73,0x73,0x73};
unsigned char DIGITAL_EQ_1080P[8] = {0x00,0x00,0x00,0x00,0x8B,0x8F,0x8F,0x8F};
#ifdef EQ_ADJ_COLOR
unsigned char BRI_EQ_1080P[8]     = {0xF4,0xF4,0xF4,0xF4,0xF8,0xF8,0xF8,0xF8};
unsigned char CON_EQ_1080P[8]     = {0x90,0x90,0x90,0x90,0x90,0x90,0x80,0x80};
unsigned char SAT_EQ_1080P[8]     = {0x80,0x80,0x80,0x78,0x78,0x78,0x78,0x78};
unsigned char BRI_EQ_720P[9]      = {0xF4,0xF4,0xF4,0xF4,0xF8,0xF8,0xF8,0xF8,0xF8};
unsigned char CON_EQ_720P[9]      = {0x90,0x90,0x90,0x90,0x88,0x88,0x84,0x90,0x90};
unsigned char SAT_EQ_720P[9]      = {0x84,0x84,0x84,0x80,0x80,0x80,0x80,0x84,0x84};
#endif
unsigned char SHARP_EQ_1080P[8]   = {0x90,0x90,0x99,0x99,0x99,0x99,0x99,0x90};
unsigned char PEAK_EQ_1080P[8]    = {0x00,0x10,0x00,0x00,0x00,0x00,0x50,0x00};
unsigned char CTI_EQ_1080P[8]     = {0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A};
unsigned char C_LOCK_EQ_1080P[8]  = {0x92,0x92,0x92,0x92,0x92,0xA2,0xA2,0xA2};
unsigned char UGAIN_EQ_1080P[8]   = {0x00,0x00,0x00,0x00,0x10,0x10,0x20,0x00};
unsigned char VGAIN_EQ_1080P[8]   = {0x00,0x00,0x00,0x00,0x10,0x10,0x20,0x00};

unsigned char SHARP_EQ_720P[9]    = {0x90,0x90,0x99,0x99,0x99,0x99,0x99,0x90,0x90};
unsigned char PEAK_EQ_720P[9]     = {0x00,0x20,0x10,0x10,0x00,0x00,0x40,0x20,0x20};
unsigned char CTI_EQ_720P[9]      = {0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A,0x0A};
unsigned char C_LOCK_EQ_720P[9]   = {0x92,0x92,0x92,0x92,0x92,0x92,0xA2,0x92,0xA2};
unsigned char UGAIN_EQ_720P[9]    = {0x30,0x30,0x30,0x30,0x30,0x30,0x40,0x30,0x30};
unsigned char VGAIN_EQ_720P[9]    = {0x30,0x30,0x30,0x30,0x30,0x30,0x40,0x30,0x30};
unsigned char ANALOG_EQ_720P[9]   = {0x13,0x03,0x53,0x73,0x73,0x73,0x73,0x03,0x13};
unsigned char DIGITAL_EQ_720P[9]  = {0x00,0x00,0x00,0x00,0x88,0x8F,0x8F,0x00,0x00};

unsigned char eq_stage[MAX_CHANNEL] = {[0 ... (MAX_CHANNEL - 1)] = 0};
#ifdef EQ_ADJ_COLOR
int nvp6124_brightness_eq(int id, int ch, int stage, NVP6124_VFMT_T fmt_idx)
{
    int ret;

    ret = nvp6124_i2c_write(id, 0xFF, 0x00); if(ret < 0) goto exit;
    if((fmt_idx == NVP6124_VFMT_720P25) || (fmt_idx == NVP6124_VFMT_720P30))
        ret = nvp6124_i2c_write(id, 0x0C+ch, BRI_EQ_720P[stage]);
    else if((fmt_idx == NVP6124_VFMT_1080P25) || (fmt_idx == NVP6124_VFMT_1080P30))
        ret = nvp6124_i2c_write(id, 0x0C+ch, BRI_EQ_1080P[stage]);
exit:
    return ret;
}

int nvp6124_contrast_eq(int id, int ch, int stage, NVP6124_VFMT_T fmt_idx)
{
    int ret;

    ret = nvp6124_i2c_write(id, 0xFF, 0x00); if(ret < 0) goto exit;
    if((fmt_idx == NVP6124_VFMT_720P25) || (fmt_idx == NVP6124_VFMT_720P30))
        ret = nvp6124_i2c_write(id, 0x10+ch, CON_EQ_720P[stage]);
    else if((fmt_idx == NVP6124_VFMT_1080P25) || (fmt_idx == NVP6124_VFMT_1080P30))
        ret = nvp6124_i2c_write(id, 0x10+ch, CON_EQ_1080P[stage]);
exit:
    return ret;
}

int nvp6124_saturation_eq(int id, int ch, int stage, NVP6124_VFMT_T fmt_idx)
{
    int ret;

    ret = nvp6124_i2c_write(id, 0xFF, 0x00); if(ret < 0) goto exit;
    if((fmt_idx == NVP6124_VFMT_720P25) || (fmt_idx == NVP6124_VFMT_720P30))
        ret = nvp6124_i2c_write(id, 0x3C+ch, SAT_EQ_720P[stage]);
    else if((fmt_idx == NVP6124_VFMT_1080P25) || (fmt_idx == NVP6124_VFMT_1080P30))
        ret = nvp6124_i2c_write(id, 0x3C+ch, SAT_EQ_1080P[stage]);
exit:
    return ret;
}
#endif
/*
int nvp6124_c_filter_eq(int id, int ch, int stage, NVP6124_VFMT_T fmt_idx)
{
    int ret;

    ret = nvp6124_i2c_write(id, 0xFF, 0x00); if(ret < 0) goto exit;
    if((fmt_idx == NVP6124_VFMT_720P25) || (fmt_idx == NVP6124_VFMT_720P30))
        ret = nvp6124_i2c_write(id, 0x21+ch, C_LOCK_EQ_720P[stage]);
    else if((fmt_idx == NVP6124_VFMT_1080P25) || (fmt_idx == NVP6124_VFMT_1080P30))
        ret = nvp6124_i2c_write(id, 0x21+ch, C_LOCK_EQ_1080P[stage]);
exit:
    return ret;
}
*/
int nvp6124_sharpness_eq(int id, int ch, int stage, NVP6124_VFMT_T fmt_idx)
{
    int ret;

    ret = nvp6124_i2c_write(id, 0xFF, 0x00); if(ret < 0) goto exit;
    if((fmt_idx == NVP6124_VFMT_720P25) || (fmt_idx == NVP6124_VFMT_720P30))
        ret = nvp6124_i2c_write(id, 0x14+ch, SHARP_EQ_720P[stage]);
    else if((fmt_idx == NVP6124_VFMT_1080P25) || (fmt_idx == NVP6124_VFMT_1080P30))
        ret = nvp6124_i2c_write(id, 0x14+ch, SHARP_EQ_1080P[stage]);
exit:
    return ret;
}

int nvp6124_peaking_eq(int id, int ch, int stage, NVP6124_VFMT_T fmt_idx)
{
    int ret;

    ret = nvp6124_i2c_write(id, 0xFF, 0x00); if(ret < 0) goto exit;
    if((fmt_idx == NVP6124_VFMT_720P25) || (fmt_idx == NVP6124_VFMT_720P30))
        ret = nvp6124_i2c_write(id, 0x18+ch, PEAK_EQ_720P[stage]);
    else if((fmt_idx == NVP6124_VFMT_1080P25) || (fmt_idx == NVP6124_VFMT_1080P30))
        ret = nvp6124_i2c_write(id, 0x18+ch, PEAK_EQ_1080P[stage]);
exit:
    return ret;
}
/*
int nvp6124_ctigain_eq(int id, int ch, int stage, NVP6124_VFMT_T fmt_idx)
{
    int ret;

    ret = nvp6124_i2c_write(id, 0xFF, 0x00); if(ret < 0) goto exit;
    if((fmt_idx == NVP6124_VFMT_720P25) || (fmt_idx == NVP6124_VFMT_720P30))
        ret = nvp6124_i2c_write(id, 0x38+ch, CTI_EQ_720P[stage]);
    else if((fmt_idx == NVP6124_VFMT_1080P25) || (fmt_idx == NVP6124_VFMT_1080P30))
        ret = nvp6124_i2c_write(id, 0x38+ch, CTI_EQ_1080P[stage]);
exit:
    return ret;
}
*/
int nvp6124_ugain_eq(int id, int ch, int stage, NVP6124_VFMT_T fmt_idx)
{
    int ret;

    ret = nvp6124_i2c_write(id, 0xFF, 0x00); if(ret < 0) goto exit;
    if((fmt_idx == NVP6124_VFMT_720P25) || (fmt_idx == NVP6124_VFMT_720P30))
        ret = nvp6124_i2c_write(id, 0x44+ch, UGAIN_EQ_720P[stage]);
    else if((fmt_idx == NVP6124_VFMT_1080P25) || (fmt_idx == NVP6124_VFMT_1080P30))
        ret = nvp6124_i2c_write(id, 0x44+ch, UGAIN_EQ_1080P[stage]);
exit:
    return ret;
}

int nvp6124_vgain_eq(int id, int ch, int stage, NVP6124_VFMT_T fmt_idx)
{
    int ret;

    ret = nvp6124_i2c_write(id, 0xFF, 0x00); if(ret < 0) goto exit;
    if((fmt_idx == NVP6124_VFMT_720P25) || (fmt_idx == NVP6124_VFMT_720P30))
        ret = nvp6124_i2c_write(id, 0x48+ch, VGAIN_EQ_720P[stage]);
    else if((fmt_idx == NVP6124_VFMT_1080P25) || (fmt_idx == NVP6124_VFMT_1080P30))
        ret = nvp6124_i2c_write(id, 0x48+ch, VGAIN_EQ_1080P[stage]);
exit:
    return ret;
}

unsigned int get_ceq_stage(unsigned char resol, unsigned int acc_gain)
{
    unsigned char c_eq = 0;
    if((resol == NVP6124_VFMT_1080P25) || (resol == NVP6124_VFMT_1080P30)) {
        if     (acc_gain >= 0x000 && acc_gain < 0x052)    c_eq = 1;
        else if(acc_gain >= 0x052 && acc_gain < 0x089)    c_eq = 2;
        else if(acc_gain >= 0x089 && acc_gain < 0x113)    c_eq = 3;
        else if(acc_gain >= 0x113 && acc_gain < 0x25F)    c_eq = 4;
        else if(acc_gain >= 0x25F && acc_gain < 0x700)    c_eq = 5;
        else if(acc_gain >= 0x700 && acc_gain < 0x7FF)    c_eq = 6;
        else                                              c_eq = 7;
    }
    else if((resol == NVP6124_VFMT_720P25) || (resol == NVP6124_VFMT_720P30)) {
        if     (acc_gain >= 0x000 && acc_gain < 0x055)    c_eq = 1;
        else if(acc_gain >= 0x055 && acc_gain < 0x082)    c_eq = 2;
        else if(acc_gain >= 0x082 && acc_gain < 0x0D8)    c_eq = 3;
        else if(acc_gain >= 0x0D8 && acc_gain < 0x18F)    c_eq = 4;
        else if(acc_gain >= 0x18F && acc_gain < 0x700)    c_eq = 5;
        else if(acc_gain >= 0x700 && acc_gain < 0x7FF)    c_eq = 6;
        else                                              c_eq = 7;
    }
    return c_eq;
}

unsigned int get_yeq_stage(unsigned char resol, unsigned int y_minus_slp)
{
    unsigned char y_eq = 0;
    if((resol == NVP6124_VFMT_1080P25) || (resol == NVP6124_VFMT_1080P30)) {
        if     (y_minus_slp == 0x000)                           y_eq = 0;
        else if(y_minus_slp >  0x000 && y_minus_slp < 0x0E7)    y_eq = 1;
        else if(y_minus_slp >= 0x0E7 && y_minus_slp < 0x11A)    y_eq = 2;
        else if(y_minus_slp >= 0x11A && y_minus_slp < 0x151)    y_eq = 3;
        else if(y_minus_slp >= 0x151 && y_minus_slp < 0x181)    y_eq = 4;
        else if(y_minus_slp >= 0x181 && y_minus_slp < 0x200)    y_eq = 5;
        else                                                    y_eq = 6;
    }
    else if((resol == NVP6124_VFMT_720P25) || (resol == NVP6124_VFMT_720P30)) {
        if     (y_minus_slp == 0x000)                           y_eq = 0;
        else if(y_minus_slp >  0x000 && y_minus_slp < 0x104)    y_eq = 1;
        else if(y_minus_slp >= 0x104 && y_minus_slp < 0x125)    y_eq = 2;
        else if(y_minus_slp >= 0x125 && y_minus_slp < 0x14C)    y_eq = 3;
        else if(y_minus_slp >= 0x14C && y_minus_slp < 0x16F)    y_eq = 4;
        else if(y_minus_slp >= 0x16F && y_minus_slp < 0x185)    y_eq = 5;
        else                                                    y_eq = 6;
    }
    return y_eq;
}

unsigned int is_bypass_mode(unsigned int c_stage, unsigned int c_status, unsigned int agc_val, unsigned int bw_on, unsigned int y_ref2_status)
{
    if(bw_on) {
        if(((agc_val < 0x20)  && (y_ref2_status >= 0x176))    ||
           ((agc_val >= 0x20) && (y_ref2_status >= 0x1B0)))
            return 1;
    }
    else {
        if(((c_stage > 0 && c_stage < 3) && y_ref2_status >= 0x160)    ||
           ((c_stage == 3)               && y_ref2_status >= 0x168)    ||
           ((c_stage == 4)               && y_ref2_status >= 0x195))
            return 1;
    }
    return 0;
}

volatile unsigned char c_same_cnt[MAX_CHANNEL] = {[0 ... (MAX_CHANNEL - 1)] = 0};
volatile unsigned char y_same_cnt[MAX_CHANNEL] = {[0 ... (MAX_CHANNEL - 1)] = 0};
volatile unsigned char check_c_stage[MAX_CHANNEL] = {[0 ... (MAX_CHANNEL - 1)] = 0};
volatile unsigned char check_c_stage_back[MAX_CHANNEL] = {[0 ... (MAX_CHANNEL - 1)] = 0xFF};
volatile unsigned char check_y_stage[MAX_CHANNEL] = {[0 ... (MAX_CHANNEL - 1)] = 0};
volatile unsigned char check_y_stage_back[MAX_CHANNEL] = {[0 ... (MAX_CHANNEL - 1)] = 0xFF};
volatile unsigned char vidmode_back[MAX_CHANNEL] = {[0 ... (MAX_CHANNEL - 1)] = 0xFF};
volatile unsigned char video_on[MAX_CHANNEL];

int nvp6124_video_set_equalizer(int id, int ch, NVP6124_VFMT_T fmt_idx) {
    unsigned char vidmode[MAX_CHANNEL];
    unsigned char agc_lock;
    unsigned int  agc_val[MAX_CHANNEL];
    unsigned int  acc_gain_sts[MAX_CHANNEL];
    unsigned int  y_ref_status[MAX_CHANNEL];
    unsigned int  y_ref2_status[MAX_CHANNEL];
    unsigned char bw_on[MAX_CHANNEL];
    int ret;
    
    if(id >= NVP6124_DEV_MAX  || ch >= NVP6124_DEV_CH_MAX)
        return -1;

    ret = nvp6124_i2c_write(id, 0xFF, 0x09); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0x61, ch); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0xFF, 0x00); if(ret < 0) goto exit;
    agc_val[ch] = nvp6124_i2c_read(id, 0xF7);
    ret = nvp6124_i2c_write(id, 0xFF, 0x00); if(ret < 0) goto exit;
    vidmode[ch] = nvp6124_i2c_read(id, 0xD0+ch);

    agc_lock = nvp6124_i2c_read(id, 0xEC);
    bw_on[ch] = (nvp6124_i2c_read(id, 0xF3)>>ch)&0x01;

    ret = nvp6124_i2c_write(id, 0xFF, 0x05+ch); if(ret < 0) goto exit;
    acc_gain_sts[ch] = nvp6124_i2c_read(id, 0xE2)&0x07;
    acc_gain_sts[ch] <<= 8;
    acc_gain_sts[ch] |= nvp6124_i2c_read(id, 0xE3);

    y_ref_status[ch] = nvp6124_i2c_read(id, 0xEA)&0x07;
    y_ref_status[ch] <<= 8;
    y_ref_status[ch] |= nvp6124_i2c_read(id, 0xEB);

    y_ref2_status[ch] = nvp6124_i2c_read(id, 0xE8)&0x07;
    y_ref2_status[ch] <<= 8;
    y_ref2_status[ch] |= nvp6124_i2c_read(id, 0xE9);

    if(vidmode[ch] >= 4) {
        if((((nvp6124_status_get_novid(id)>>ch)&0x01) == 0x00) && (((agc_lock>>ch)&0x01) == 0x01))
            video_on[ch] = 1;
        else
            video_on[ch] = 0;
    }
    else {
        video_on[ch] = 0;
    }

    switch(fmt_idx) {
        case NVP6124_VFMT_1080P25:
        case NVP6124_VFMT_1080P30:
        case NVP6124_VFMT_720P25:
        case NVP6124_VFMT_720P30:
            if(video_on[ch]){
                check_c_stage[ch] = get_ceq_stage(fmt_idx, acc_gain_sts[ch]);
                check_y_stage[ch] = get_yeq_stage(fmt_idx, y_ref_status[ch]);

                if((fmt_idx == NVP6124_VFMT_720P25) || (fmt_idx == NVP6124_VFMT_720P30)) {
                    if(is_bypass_mode(check_c_stage[ch], acc_gain_sts[ch],agc_val[ch], bw_on[ch],y_ref2_status[ch]))
                        check_y_stage[ch] = 7;
                    if(((check_c_stage[ch] == 5)   && y_ref2_status[ch] >= 0x1A0) ||
                        (acc_gain_sts[ch] == 0x7FF && y_ref2_status[ch] >= 0x1B0))
                        check_y_stage[ch] = 8;

                    if(y_same_cnt[ch] != 0xFF) {
                        c_same_cnt[ch]++;
                        if(c_same_cnt[ch] > 200)
                            c_same_cnt[ch] = 5;
                        else {
                            c_same_cnt[ch] = 0;
                        }

                        if(check_y_stage[ch] == check_y_stage_back[ch]) {
                            y_same_cnt[ch]++;
                            if(y_same_cnt[ch] > 200)
                                y_same_cnt[ch] = 5;
                        }
                        else {
                            y_same_cnt[ch] = 0;
                        }

                        if(c_same_cnt[ch] != y_same_cnt[ch]) {
                            c_same_cnt[ch] = 0;
                            y_same_cnt[ch] = 0;
                        }
                    }

                    if((c_same_cnt[ch]==4) && (y_same_cnt[ch]==4))
                        stage_update[ch] = 1;
                    else
                        stage_update[ch] = 0;
                }
                else { ///< fmt_idx == NVP6124_VFMT_1080P25/30
                    if(vidmode_back[ch] >= 0x04)
                        stage_update[ch] = 1;
                    else
                        stage_update[ch] = 0;

                    c_same_cnt[ch] = 0;
                    y_same_cnt[ch] = 0;
                    check_c_stage[ch] = 0;
                    check_c_stage_back[ch] = 0xFF;
                    check_y_stage[ch] = 0;
                    check_y_stage_back[ch] = 0xFF;
                    eq_stage[ch] = 0;
                }
            }

            if(stage_update[ch]) {
                if(video_on[ch])
                    y_same_cnt[ch] = 0xFF;
                eq_stage[ch] = check_y_stage[ch];

                if((fmt_idx == NVP6124_VFMT_720P25) || (fmt_idx == NVP6124_VFMT_720P30)) {
                    ret = nvp6124_i2c_write(id, 0xFF, 0x05+ch); if(ret < 0) goto exit;
                    ret = nvp6124_i2c_write(id, 0x58, ANALOG_EQ_720P[eq_stage[ch]]); if(ret < 0) goto exit;
                    ret = nvp6124_i2c_write(id, 0xFF, (ch<2)?0x0A:0x0B); if(ret < 0) goto exit;
                    ret = nvp6124_i2c_write(id, (ch%2==0)?0x3B:0xBB, DIGITAL_EQ_720P[eq_stage[ch]]); if(ret < 0) goto exit;
                }
                else {
                    ret = nvp6124_i2c_write(id, 0xFF, 0x05+ch); if(ret < 0) goto exit;
                    ret = nvp6124_i2c_write(id, 0x58, ANALOG_EQ_1080P[eq_stage[ch]]); if(ret < 0) goto exit;
                    ret = nvp6124_i2c_write(id, 0xFF, (ch<2)?0x0A:0x0B); if(ret < 0) goto exit;
                    ret = nvp6124_i2c_write(id, (ch%2==0)?0x3B:0xBB, DIGITAL_EQ_1080P[eq_stage[ch]]); if(ret < 0) goto exit;
                }
#ifdef EQ_ADJ_COLOR
                nvp6124_brightness_eq(id, ch, eq_stage[ch], fmt_idx);
                nvp6124_contrast_eq(id, ch, eq_stage[ch], fmt_idx);
                nvp6124_saturation_eq(id, ch, eq_stage[ch], fmt_idx);
#endif
                nvp6124_sharpness_eq(id, ch, eq_stage[ch], fmt_idx);
                nvp6124_peaking_eq(id, ch, eq_stage[ch], fmt_idx);
                //nvp6124_ctigain_eq(id, ch, eq_stage[ch], fmt_idx); ///< It will cause video output be abnormal
                //nvp6124_c_filter_eq(id, ch, eq_stage[ch], fmt_idx);
                nvp6124_ugain_eq(id, ch, eq_stage[ch], fmt_idx);
                nvp6124_vgain_eq(id, ch, eq_stage[ch], fmt_idx);
            }
            check_c_stage_back[ch] = check_c_stage[ch];
            check_y_stage_back[ch] = check_y_stage[ch];
            vidmode_back[ch] = vidmode[ch];
            break;
        default: ///< Do nothing
            break;
    }

exit:
    return ret;
}

int nvp6124_video_set_output_format(int id, int ch, NVP6124_VFMT_T fmt_idx, int vmode) {
    unsigned char pn_value_sd_nt_comet[4] =  {0x4D,0x0E,0x88,0x6C};
    unsigned char pn_value_720p_30[4] =      {0xEE,0x00,0xE5,0x4E};
    unsigned char pn_value_720p_60[4] =      {0x78,0x6E,0x7C,0x27};
    unsigned char pn_value_fhd_nt[4] = 	     {0x2C,0xF0,0xCA,0x52};
    unsigned char pn_value_sd_pal_comet[4] = {0x75,0x35,0xB4,0x6C};
    unsigned char pn_value_720p_25[4] =      {0x46,0x08,0x10,0x4F};
    unsigned char pn_value_720p_50[4] =      {0xCD,0xBD,0x7F,0x27};
    unsigned char pn_value_fhd_pal[4] =      {0xC8,0x7D,0xC3,0x52};
    unsigned char ch_seq[4] =                {2,1,0,3};
    unsigned char FLD_INV_AND[4] = {0xef, 0xdf, 0xbf, 0x7f};
    unsigned char FLD_INV_OR[4]  = {0x10, 0x20, 0x40, 0x80};
    int ret;

    if(id >= NVP6124_DEV_MAX  || ch > NVP6124_DEV_CH_MAX)
        return -1;

    ret = nvp6124_i2c_write(id, 0xFF, 0x00); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0x80, 0x0F); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0xFF, 0x01); if(ret < 0) goto exit; ///< EACH_REG_SET: each control
    ret = nvp6124_i2c_write(id, 0x93, 0x80); if(ret < 0) goto exit;

    switch(fmt_idx) {
        case NVP6124_VFMT_960H25:
        case NVP6124_VFMT_960H30:
            ret = nvp6124_i2c_write(id, 0xFF, 0x00); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x08+ch, fmt_idx==NVP6124_VFMT_960H25?0xDD:0xA0); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x0C+ch, fmt_idx==NVP6124_VFMT_960H25?0xF5:0xF8); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x10+ch, fmt_idx==NVP6124_VFMT_960H25?0x79:0x80); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x14+ch, 0x80); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x18+ch, 0x18); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x21+4*ch, fmt_idx==NVP6124_VFMT_960H25?0x02:0x82); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x23+4*ch, 0x43); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x30+ch, fmt_idx==NVP6124_VFMT_960H25?0x12:0x11); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x3C+ch, fmt_idx==NVP6124_VFMT_960H25?0x80:0xA0); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x40+ch, fmt_idx==NVP6124_VFMT_960H25?0x00:0x01); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x44+ch, 0x00); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x48+ch, 0x00); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x4C+ch, fmt_idx==NVP6124_VFMT_960H25?0x04:0x00); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x50+ch, fmt_idx==NVP6124_VFMT_960H25?0x04:0x00); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x54, fmt_idx==NVP6124_VFMT_960H25?(nvp6124_i2c_read(id, 0x54)&FLD_INV_AND[ch]):(nvp6124_i2c_read(id, 0x54)|FLD_INV_OR[ch])); if(ret < 0) goto exit;
            /* Update H_DELAY */
            ret = nvp6124_i2c_write(id, 0x58+ch, fmt_idx==NVP6124_VFMT_960H25?0x65:0x90); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x5C+ch, 0x1E); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x64+ch, fmt_idx==NVP6124_VFMT_960H25?0x0D:0x08); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x81+ch, 0x00); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x85+ch, 0x11); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x89+ch, fmt_idx==NVP6124_VFMT_960H25?0x10:0x00); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x8E + ch, fmt_idx==NVP6124_VFMT_960H25?0x08:0x07); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x93+ch, 0x00); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x98+ch, fmt_idx==NVP6124_VFMT_960H25?0x07:0x04); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xA0+ch, fmt_idx==NVP6124_VFMT_960H25?0x00:0x10); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xA4+ch, fmt_idx==NVP6124_VFMT_960H25?0x00:0x01); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xFF, 0x01); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x88+ch, 0x7E); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x8C+ch, 0x26); if(ret < 0) goto exit;
            if(vmode == NVP6124_VMODE_1CH_BYPASS)
                ret = nvp6124_i2c_write(id, 0xCC+ch_seq[ch], 0x36); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xD7, nvp6124_i2c_read(id, 0xD7)&(~(1<<ch))); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xFF, 0x02); if(ret < 0) goto exit; ///< Motion
            ret = nvp6124_i2c_write(id, 0x16+ch/2, (nvp6124_i2c_read(id, 0x16+ch/2)&(ch%2==0?0xF0:0x0F))|(0x00<<((ch%2)*4))); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xFF, 0x05+ch); if(ret < 0) goto exit;
            ret = nvp6124_i2c_array_write(id, 0x00, fmt_idx==NVP6124_VFMT_960H25?NVP6124_B5_PAL:NVP6124_B5_NTSC, fmt_idx==NVP6124_VFMT_960H25?sizeof(NVP6124_B5_PAL):sizeof(NVP6124_B5_NTSC)); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xFF, 0x05+ch); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x06, 0x40); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x25, fmt_idx==NVP6124_VFMT_960H25?0xCA:0xDA); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xFF, 0x09); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x40+ch, 0x60); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x44, nvp6124_i2c_read(id, 0x44)&(~(1<<ch))); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x50+4*ch, fmt_idx==NVP6124_VFMT_960H25?pn_value_sd_pal_comet[0]:pn_value_sd_nt_comet[0]); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x51+4*ch, fmt_idx==NVP6124_VFMT_960H25?pn_value_sd_pal_comet[1]:pn_value_sd_nt_comet[1]); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x52+4*ch, fmt_idx==NVP6124_VFMT_960H25?pn_value_sd_pal_comet[2]:pn_value_sd_nt_comet[2]); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x53+4*ch, fmt_idx==NVP6124_VFMT_960H25?pn_value_sd_pal_comet[3]:pn_value_sd_nt_comet[3]); if(ret < 0) goto exit;
            break;
        case NVP6124_VFMT_720P25:
        case NVP6124_VFMT_720P30:
            ret = nvp6124_i2c_write(id, 0xFF, 0x00); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x08+ch, 0x60); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x0C+ch, 0x08); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x10+ch, 0x88); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x14+ch, 0x90); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x18+ch, 0x30); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x21+4*ch, 0x92); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x22+4*ch, 0x0A); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x23+4*ch, 0x43); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x30+ch, 0x12); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x3C+ch, 0x90); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x40+ch, fmt_idx==NVP6124_VFMT_720P25?0x00:0xFD); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x44+ch, 0x30); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x48+ch, 0x30); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x4C+ch, 0x04); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x50+ch, 0x04); if(ret < 0) goto exit;
            /* Update H_DELAY */
            ret = nvp6124_i2c_write(id, 0x58+ch, fmt_idx==NVP6124_VFMT_720P25?0x80:0x90); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x5C+ch, 0x9E); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x64+ch, fmt_idx==NVP6124_VFMT_720P25?0xB1:0xB2); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x81+ch, fmt_idx==NVP6124_VFMT_720P25?0x07:0x06); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x85+ch, 0x00); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x89+ch, 0x10); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x8E + ch, 0x0D); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x93+ch, 0x00); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x98+ch, fmt_idx==NVP6124_VFMT_720P25?0x07:0x04); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xA0+ch, 0x00); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xA4+ch, fmt_idx==NVP6124_VFMT_720P25?0x00:0x01); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xFF, 0x01); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x88+ch, 0x5C); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x8C+ch, 0x40); if(ret < 0) goto exit;
            if(vmode == NVP6124_VMODE_1CH_BYPASS)
                ret = nvp6124_i2c_write(id, 0xCC+ch_seq[ch], 0x46); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xD7, nvp6124_i2c_read(id, 0xD7)|(1<<ch)); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xFF, 0x02); if(ret < 0) goto exit; ///< Motion
            ret = nvp6124_i2c_write(id, 0x16+ch/2, (nvp6124_i2c_read(id, 0x16+ch/2)&(ch%2==0?0xF0:0x0F))|(0x00<<((ch%2)*4))); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xFF, 0x05+ch); if(ret < 0) goto exit;
            ret = nvp6124_i2c_array_write(id, 0x00, fmt_idx==NVP6124_VFMT_720P25?NVP6124_B5_25P:NVP6124_B5_30P, fmt_idx==NVP6124_VFMT_720P25?sizeof(NVP6124_B5_25P):sizeof(NVP6124_B5_30P)); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xFF, 0x05+ch); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x01, 0x0D); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x06, 0x40); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x2B, 0x78); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x59, 0x00); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x58, 0x13); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xC0, 0x16); if(ret < 0) goto exit;
            ///< EQ_Init for 720P_2530
            ret = nvp6124_i2c_write(id, 0xD8, 0x0C); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xD9, 0x0E); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xDA, 0x12); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xDB, 0x14); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xDC, 0x1C); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xDD, 0x2C); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xDE, 0x34); if(ret < 0) goto exit;

            ret = nvp6124_i2c_write(id, 0xFF, 0x09); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x40+ch, 0x00); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x44, nvp6124_i2c_read(id, 0x44)|(1<<ch)); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x50+4*ch, fmt_idx==NVP6124_VFMT_720P25?pn_value_720p_25[0]:pn_value_720p_30[0]); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x51+4*ch, fmt_idx==NVP6124_VFMT_720P25?pn_value_720p_25[1]:pn_value_720p_30[1]); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x52+4*ch, fmt_idx==NVP6124_VFMT_720P25?pn_value_720p_25[2]:pn_value_720p_30[2]); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x53+4*ch, fmt_idx==NVP6124_VFMT_720P25?pn_value_720p_25[3]:pn_value_720p_30[3]); if(ret < 0) goto exit;
            break;
        case NVP6124_VFMT_720P50:
        case NVP6124_VFMT_720P60:
            ret = nvp6124_i2c_write(id, 0xFF, 0x00); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x08+ch, 0x60); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x0C+ch, 0x08); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x10+ch, 0x88); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x14+ch, 0x90); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x18+ch, 0x00); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x21+4*ch, 0x92); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x22+4*ch, 0x0A); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x23+4*ch, 0x43); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x30+ch, 0x12); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x3C+ch, 0x90); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x40+ch, fmt_idx==NVP6124_VFMT_720P50?0x00:0xFD); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x44+ch, 0x30); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x48+ch, 0x30); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x4C+ch, 0x04); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x50+ch, 0x04); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x58+ch, fmt_idx==NVP6124_VFMT_720P50?0xC0:0xB0); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x5C+ch, 0x9E); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x64+ch, fmt_idx==NVP6124_VFMT_720P50?0xB1:0xB2); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x81+ch, fmt_idx==NVP6124_VFMT_720P50?0x05:0x04); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x85+ch, 0x00); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x89+ch, 0x10); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x8E + ch, fmt_idx==NVP6124_VFMT_720P50?0x0B:0x09); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x93+ch, 0x00); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x98+ch, fmt_idx==NVP6124_VFMT_720P50?0x07:0x04); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xA0+ch, 0x00); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xA4+ch, fmt_idx==NVP6124_VFMT_720P50?0x00:0x01); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xFF, 0x01); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x88+ch, 0x4D); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x8C+ch, 0x84); if(ret < 0) goto exit;
            if(vmode == NVP6124_VMODE_1CH_BYPASS)
                ret = nvp6124_i2c_write(id, 0xCC+ch_seq[ch], 0x66); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xD7, nvp6124_i2c_read(id, 0xD7)|(1<<ch)); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xFF, 0x02); if(ret < 0) goto exit; ///< Motion
            ret = nvp6124_i2c_write(id, 0x16+ch/2, (nvp6124_i2c_read(id, 0x16+ch/2)&(ch%2==0?0xF0:0x0F))|(0x00<<((ch%2)*4))); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xFF, 0x05+ch); if(ret < 0) goto exit;
            ret = nvp6124_i2c_array_write(id, 0x00, fmt_idx==NVP6124_VFMT_720P50?NVP6124_B5_25P:NVP6124_B5_30P, fmt_idx==NVP6124_VFMT_720P50?sizeof(NVP6124_B5_25P):sizeof(NVP6124_B5_30P)); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xFF, 0x05+ch); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x01, 0x0C); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x06, 0x40); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x2B, 0x78); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x59, 0x01); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x24, fmt_idx==NVP6124_VFMT_720P50?0x2A:0x1A); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x50, fmt_idx==NVP6124_VFMT_720P50?0x84:0x86); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xBB, fmt_idx==NVP6124_VFMT_720P50?0x00:0xE4); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xFF, 0x09); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x40+ch, 0x00); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x44, nvp6124_i2c_read(id, 0x44)|(1<<ch)); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x50+4*ch, fmt_idx==NVP6124_VFMT_720P25?pn_value_720p_50[0]:pn_value_720p_60[0]); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x51+4*ch, fmt_idx==NVP6124_VFMT_720P25?pn_value_720p_50[1]:pn_value_720p_60[1]); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x52+4*ch, fmt_idx==NVP6124_VFMT_720P25?pn_value_720p_50[2]:pn_value_720p_60[2]); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x53+4*ch, fmt_idx==NVP6124_VFMT_720P25?pn_value_720p_50[3]:pn_value_720p_60[3]); if(ret < 0) goto exit;
            break;
        case NVP6124_VFMT_1080P25:
        case NVP6124_VFMT_1080P30:
            ret = nvp6124_i2c_write(id, 0xFF, 0x00); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x08+ch, 0x60); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x0C+ch, 0xF4); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x10+ch, 0x90); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x14+ch, 0x90); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x18+ch, 0x00); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x21+4*ch, 0x92); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x22+4*ch, 0x0A); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x23+4*ch, 0x43); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x30+ch, 0x12); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x3C+ch, 0x80); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x40+ch, 0x00); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x44+ch, 0x00); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x48+ch, 0x00); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x4C+ch, 0x00); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x50+ch, 0x00); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x58+ch, fmt_idx==NVP6124_VFMT_1080P25?0x6A:0x49); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x5C+ch, 0x9E); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x64+ch, fmt_idx==NVP6124_VFMT_1080P25?0xBF:0x8D); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x81+ch, fmt_idx==NVP6124_VFMT_1080P25?0x03:0x02); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x85+ch, 0x00); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x89+ch, 0x10); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x8E + ch, fmt_idx==NVP6124_VFMT_1080P25?0x0A:0x09); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x93+ch, 0x00); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x98+ch, fmt_idx==NVP6124_VFMT_1080P25?0x07:0x04); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xA0+ch, 0x00); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xA4+ch, fmt_idx==NVP6124_VFMT_1080P25?0x00:0x01); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xFF, 0x01); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x88+ch, 0x4C); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x8C+ch, 0x84); if(ret < 0) goto exit;
            if(vmode == NVP6124_VMODE_1CH_BYPASS)
                ret = nvp6124_i2c_write(id, 0xCC+ch_seq[ch], 0x66); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xD7, nvp6124_i2c_read(id, 0xD7)|(1<<ch)); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xFF, 0x02); if(ret < 0) goto exit; ///< Motion
            ret = nvp6124_i2c_write(id, 0x16+ch/2, (nvp6124_i2c_read(id, 0x16+ch/2)&(ch%2==0?0xF0:0x0F))|(0x00<<((ch%2)*4))); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xFF, 0x05+ch); if(ret < 0) goto exit;
            ret = nvp6124_i2c_array_write(id, 0x00, fmt_idx==NVP6124_VFMT_1080P25?NVP6124_B5_25P:NVP6124_B5_30P, fmt_idx==NVP6124_VFMT_1080P25?sizeof(NVP6124_B5_25P):sizeof(NVP6124_B5_30P)); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xFF, 0x05+ch); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x01, 0x0C); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x06, 0x40); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x2A, 0x72); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x2B, 0xA8); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x58, 0x13); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x59, 0x01); if(ret < 0) goto exit;
            ///< EQ_Init for 1080P_2530
            ret = nvp6124_i2c_write(id, 0xD8, 0x10); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xD9, 0x1F); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xDA, 0x2B); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xDB, 0x7F); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xDC, 0xFF); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xDD, 0xFF); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xDE, 0xFF); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x24, fmt_idx==NVP6124_VFMT_1080P25?0x2A:0x1A); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x50, fmt_idx==NVP6124_VFMT_1080P25?0x84:0x86); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xBB, fmt_idx==NVP6124_VFMT_1080P25?0x00:0xE4); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xFF, 0x09); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x40+ch, 0x00); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x44, nvp6124_i2c_read(id, 0x44)|(1<<ch)); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x50+4*ch, fmt_idx==NVP6124_VFMT_1080P25?pn_value_fhd_pal[0]:pn_value_fhd_nt[0]); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x51+4*ch, fmt_idx==NVP6124_VFMT_1080P25?pn_value_fhd_pal[1]:pn_value_fhd_nt[1]); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x52+4*ch, fmt_idx==NVP6124_VFMT_1080P25?pn_value_fhd_pal[2]:pn_value_fhd_nt[2]); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x53+4*ch, fmt_idx==NVP6124_VFMT_1080P25?pn_value_fhd_pal[3]:pn_value_fhd_nt[3]); if(ret < 0) goto exit;
            break;
        default:  ///< Unsupported output format
            printk("Unknown video format for output format setting!\n");
            return -1;
            break;
    }

exit:
    return ret;
}

int nvp6124_video_set_output_mode(int id, int vmode) {

    int ret;

    if(id >= NVP6124_DEV_MAX)
        return -1;

    /*Common VPORTx_SEQ setting */
    ret = nvp6124_i2c_write(id, 0xFF, 0x01); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0xC4, 0x22); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0xC5, 0x22); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0xC6, 0x33); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0xC7, 0x33); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0xC9, 0x00); if(ret < 0) goto exit;

    switch(vmode) {
        case NVP6124_VMODE_1CH_BYPASS:
        default:
            ret = nvp6124_i2c_write(id, 0xFF, 0x01); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xC0, 0x22); if(ret < 0) goto exit; ///< VPORT1_SEQ1, VPORT1_SEQ2
            ret = nvp6124_i2c_write(id, 0xC1, 0x22); if(ret < 0) goto exit; ///< VPORT1_SEQ3, VPORT1_SEQ4
            ret = nvp6124_i2c_write(id, 0xC2, 0x11); if(ret < 0) goto exit; ///< VPORT2_SEQ1, VPORT2_SEQ2
            ret = nvp6124_i2c_write(id, 0xC3, 0x11); if(ret < 0) goto exit; ///< VPORT2_SEQ3, VPORT2_SEQ4
            ret = nvp6124_i2c_write(id, 0xC4, 0x00); if(ret < 0) goto exit; ///< VPORT3_SEQ1, VPORT3_SEQ2
            ret = nvp6124_i2c_write(id, 0xC5, 0x00); if(ret < 0) goto exit; ///< VPORT3_SEQ3, VPORT3_SEQ4
            ret = nvp6124_i2c_write(id, 0xC6, 0x33); if(ret < 0) goto exit; ///< VPORT4_SEQ1, VPORT4_SEQ2 
            ret = nvp6124_i2c_write(id, 0xC7, 0x33); if(ret < 0) goto exit; ///< VPORT4_SEQ3, VPORT4_SEQ4
            ret = nvp6124_i2c_write(id, 0xC8, 0x00); if(ret < 0) goto exit; ///< CH_OUT_SEL1, CH_OUT_SEL2
            ret = nvp6124_i2c_write(id, 0xCA, 0xFF); if(ret < 0) goto exit; ///< Enable VCLK_1~4, VDO_1~4
            printk("NVP6124#%d enters 1-CH bypass mode!\n", id);
            break;
        case NVP6124_VMODE_NTSC_960H_2CH:
        case NVP6124_VMODE_PAL_960H_2CH:
            ret = nvp6124_i2c_write(id, 0xFF, 0x01); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xC0, 0x10); if(ret < 0) goto exit; ///< VPORT1_SEQ1, VPORT1_SEQ2
            ret = nvp6124_i2c_write(id, 0xC1, 0x10); if(ret < 0) goto exit; ///< VPORT1_SEQ3, VPORT1_SEQ4
            ret = nvp6124_i2c_write(id, 0xC2, 0x32); if(ret < 0) goto exit; ///< VPORT2_SEQ1, VPORT2_SEQ2
            ret = nvp6124_i2c_write(id, 0xC3, 0x32); if(ret < 0) goto exit; ///< VPORT2_SEQ3, VPORT2_SEQ4
            ret = nvp6124_i2c_write(id, 0xC8, 0x22); if(ret < 0) goto exit; ///< CH_OUT_SEL1, CH_OUT_SEL2
            ret = nvp6124_i2c_write(id, 0xCA, 0x33); if(ret < 0) goto exit; ///< Disable VCLK_3&4, VDO_3&4
            ret = nvp6124_i2c_write(id, 0xCC, 0x11); if(ret < 0) goto exit; ///< VCLK1_SEL, VCLK_1_DLY_SEL, Dual_Edge Mode
            ret = nvp6124_i2c_write(id, 0xCD, 0x11); if(ret < 0) goto exit; ///< VCLK2_SEL, VCLK_2_DLY_SEL, Dual_Edge Mode
            if(vmode == NVP6124_VMODE_NTSC_960H_2CH)
                printk("NVP6124#%d enters NTSC 960H 2-CH mode!\n", id);
            else
                printk("NVP6124#%d enters PAL 960H 2-CH mode!\n", id);
            break;
        case NVP6124_VMODE_NTSC_960H_4CH:
        case NVP6124_VMODE_PAL_960H_4CH:
            ret = nvp6124_i2c_write(id, 0xFF, 0x00); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x55, 0x10); if(ret < 0) goto exit; ///< Reset Channel ID
            ret = nvp6124_i2c_write(id, 0x56, 0x32); if(ret < 0) goto exit; ///< Reset Channel ID
            ret = nvp6124_i2c_write(id, 0xFF, 0x01); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xC0, 0x10); if(ret < 0) goto exit; ///< VPORT1_SEQ1, VPORT1_SEQ2
            ret = nvp6124_i2c_write(id, 0xC1, 0x32); if(ret < 0) goto exit; ///< VPORT1_SEQ3, VPORT1_SEQ4
            ret = nvp6124_i2c_write(id, 0xC8, 0x88); if(ret < 0) goto exit; ///< CH_OUT_SEL1, CH_OUT_SEL2
            ret = nvp6124_i2c_write(id, 0xCA, 0x11); if(ret < 0) goto exit; ///< Disable VCLK_2&3&4, VDO_2&3&4
            ret = nvp6124_i2c_write(id, 0xCC, 0x77); if(ret < 0) goto exit; ///< VCLK1_SEL, VCLK_1_DLY_SEL, 4-CH_Byte_Interleave Mode
            if(vmode == NVP6124_VMODE_NTSC_960H_4CH)
                printk("NVP6124#%d enters NTSC 960H 4-CH mode!\n", id);
            else
                printk("NVP6124#%d enters PAL 960H 4-CH mode!\n", id);
            break;
        case NVP6124_VMODE_NTSC_720P_2CH:
        case NVP6124_VMODE_PAL_720P_2CH:
            ret = nvp6124_i2c_write(id, 0xFF, 0x01); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xC0, 0x10); if(ret < 0) goto exit; ///< VPORT1_SEQ1, VPORT1_SEQ2
            ret = nvp6124_i2c_write(id, 0xC1, 0x10); if(ret < 0) goto exit; ///< VPORT1_SEQ3, VPORT1_SEQ4
            ret = nvp6124_i2c_write(id, 0xC2, 0x32); if(ret < 0) goto exit; ///< VPORT2_SEQ1, VPORT2_SEQ2
            ret = nvp6124_i2c_write(id, 0xC3, 0x32); if(ret < 0) goto exit; ///< VPORT2_SEQ3, VPORT2_SEQ4
            ret = nvp6124_i2c_write(id, 0xC8, 0x22); if(ret < 0) goto exit; ///< CH_OUT_SEL1, CH_OUT_SEL2
            ret = nvp6124_i2c_write(id, 0xCA, 0x33); if(ret < 0) goto exit; ///< Disable VCLK_3&4, VDO_3&4
            ret = nvp6124_i2c_write(id, 0xCC, 0x55); if(ret < 0) goto exit; ///< VCLK1_SEL, VCLK_1_DLY_SEL, Dual_Edge Mode
            ret = nvp6124_i2c_write(id, 0xCD, 0x55); if(ret < 0) goto exit; ///< VCLK2_SEL, VCLK_2_DLY_SEL, Dual_Edge Mode
            if(vmode == NVP6124_VMODE_NTSC_960H_4CH)
                printk("NVP6124#%d enters NTSC 720P 2-CH mode!\n", id);
            else
                printk("NVP6124#%d enters PAL 720P 2-CH mode!\n", id);
            break;
        case NVP6124_VMODE_NTSC_960H_720P_2CH:
        case NVP6124_VMODE_PAL_960H_720P_2CH:
            ret = nvp6124_i2c_write(id, 0xFF, 0x01); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xC0, 0x10); if(ret < 0) goto exit; ///< VPORT1_SEQ1, VPORT1_SEQ2
            ret = nvp6124_i2c_write(id, 0xC1, 0x10); if(ret < 0) goto exit; ///< VPORT1_SEQ3, VPORT1_SEQ4
            ret = nvp6124_i2c_write(id, 0xC2, 0x32); if(ret < 0) goto exit; ///< VPORT2_SEQ1, VPORT2_SEQ2
            ret = nvp6124_i2c_write(id, 0xC3, 0x32); if(ret < 0) goto exit; ///< VPORT2_SEQ3, VPORT2_SEQ4
            ret = nvp6124_i2c_write(id, 0xC8, 0x22); if(ret < 0) goto exit; ///< CH_OUT_SEL1, CH_OUT_SEL2
            ret = nvp6124_i2c_write(id, 0xCA, 0x33); if(ret < 0) goto exit; ///< Disable VCLK_3&4, VDO_3&4
            ret = nvp6124_i2c_write(id, 0xCC, 0x11); if(ret < 0) goto exit; ///< VCLK1_SEL, VCLK_1_DLY_SEL, Dual_Edge Mode
            ret = nvp6124_i2c_write(id, 0xCD, 0x55); if(ret < 0) goto exit; ///< VCLK2_SEL, VCLK_2_DLY_SEL, Dual_Edge Mode
            if(vmode == NVP6124_VMODE_NTSC_960H_720P_2CH)
                printk("NVP6124#%d enters NTSC 960H + 720P 2-CH mode!\n", id);
            else
                printk("NVP6124#%d enters PAL 960H + 720P 2-CH mode!\n", id);
            break;
        case NVP6124_VMODE_NTSC_720P_960H_2CH:
        case NVP6124_VMODE_PAL_720P_960H_2CH:
            ret = nvp6124_i2c_write(id, 0xFF, 0x01); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xC0, 0x10); if(ret < 0) goto exit; ///< VPORT1_SEQ1, VPORT1_SEQ2
            ret = nvp6124_i2c_write(id, 0xC1, 0x10); if(ret < 0) goto exit; ///< VPORT1_SEQ3, VPORT1_SEQ4
            ret = nvp6124_i2c_write(id, 0xC2, 0x32); if(ret < 0) goto exit; ///< VPORT2_SEQ1, VPORT2_SEQ2
            ret = nvp6124_i2c_write(id, 0xC3, 0x32); if(ret < 0) goto exit; ///< VPORT2_SEQ3, VPORT2_SEQ4
            ret = nvp6124_i2c_write(id, 0xC8, 0x22); if(ret < 0) goto exit; ///< CH_OUT_SEL1, CH_OUT_SEL2
            ret = nvp6124_i2c_write(id, 0xCA, 0x33); if(ret < 0) goto exit; ///< Disable VCLK_3&4, VDO_3&4
            ret = nvp6124_i2c_write(id, 0xCC, 0x55); if(ret < 0) goto exit; ///< VCLK1_SEL, VCLK_1_DLY_SEL, Dual_Edge Mode
            ret = nvp6124_i2c_write(id, 0xCD, 0x11); if(ret < 0) goto exit; ///< VCLK2_SEL, VCLK_2_DLY_SEL, Dual_Edge Mode
            if(vmode == NVP6124_VMODE_NTSC_720P_960H_2CH)
                printk("NVP6124#%d enters NTSC 720P + 960H 2-CH mode!\n", id);
            else
                printk("NVP6124#%d enters PAL 720P + 960H 2-CH mode!\n", id);
            break;
        case NVP6124_VMODE_NTSC_CIF_AHD_2CH:
        case NVP6124_VMODE_PAL_CIF_AHD_2CH:
            ret = -1;
            printk("NVP6124 currently doesn't support 720P60/720P50 AHD-CIF 2-CH mode!\n");
            break;
        case NVP6124_VMODE_NTSC_CIF_AHD_4CH:
        case NVP6124_VMODE_PAL_CIF_AHD_4CH:
            ret = -1;
            printk("NVP6124 currently doesn't support 720P30/720P25 AHD-CIF 4-CH mode!\n");
/*
            ret = nvp6124_i2c_write(id, 0xFF, 0x00); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0x55, 0x10); if(ret < 0) goto exit; ///< Reset Channel ID
            ret = nvp6124_i2c_write(id, 0x56, 0x32); if(ret < 0) goto exit; ///< Reset Channel ID
            ret = nvp6124_i2c_write(id, 0xFF, 0x01); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xC0, 0x10); if(ret < 0) goto exit; ///< VPORT1_SEQ1, VPORT1_SEQ2
            ret = nvp6124_i2c_write(id, 0xC1, 0x32); if(ret < 0) goto exit; ///< VPORT1_SEQ3, VPORT1_SEQ4
            ret = nvp6124_i2c_write(id, 0xC8, 0x33); if(ret < 0) goto exit; ///< CH_OUT_SEL1, CH_OUT_SEL2
            ret = nvp6124_i2c_write(id, 0xCA, 0x11); if(ret < 0) goto exit; ///< Disable VCLK_2&3&4, VDO_2&3&4
            ret = nvp6124_i2c_write(id, 0xCC, 0x66); if(ret < 0) goto exit; ///< VCLK1_SEL, VCLK_1_DLY_SEL, 4-CH_Byte_Interleave Mode
            if(vmode == NVP6124_VMODE_NTSC_CIF_AHD_4CH)
                printk("NVP6124#%d enters NTSC 720P30 AHD-CIF 4-CH mode!\n", id);
            else
                printk("NVP6124#%d enters PAL 720P25 AHD-CIF 4-CH mode!\n", id);
*/
            break;
        case NVP6124_VMODE_NTSC_CIF_AFHD_2CH:
            ret = nvp6124_i2c_write(id, 0xFF, 0x01); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xC0, 0x10); if(ret < 0) goto exit; ///< VPORT1_SEQ1, VPORT1_SEQ2
            ret = nvp6124_i2c_write(id, 0xC1, 0x10); if(ret < 0) goto exit; ///< VPORT1_SEQ3, VPORT1_SEQ4
            ret = nvp6124_i2c_write(id, 0xC2, 0x32); if(ret < 0) goto exit; ///< VPORT2_SEQ1, VPORT2_SEQ2
            ret = nvp6124_i2c_write(id, 0xC3, 0x32); if(ret < 0) goto exit; ///< VPORT2_SEQ3, VPORT2_SEQ4
            ret = nvp6124_i2c_write(id, 0xC8, 0x33); if(ret < 0) goto exit; ///< CH_OUT_SEL1, CH_OUT_SEL2
            ret = nvp6124_i2c_write(id, 0xCA, 0x33); if(ret < 0) goto exit; ///< Disable VCLK_3&4, VDO_3&4
            ret = nvp6124_i2c_write(id, 0xCC, 0x46); if(ret < 0) goto exit; ///< VCLK1_SEL, VCLK_1_DLY_SEL, Dual_Edge Mode
            ret = nvp6124_i2c_write(id, 0xCD, 0x46); if(ret < 0) goto exit; ///< VCLK2_SEL, VCLK_2_DLY_SEL, Dual_Edge Mode
            printk("NVP6124#%d enters NTSC 1080P AFHD-CIF 2-CH mode!\n", id);
            break;
        case NVP6124_VMODE_PAL_CIF_AFHD_2CH:
            ret = nvp6124_i2c_write(id, 0xFF, 0x01); if(ret < 0) goto exit;
            ret = nvp6124_i2c_write(id, 0xC0, 0x10); if(ret < 0) goto exit; ///< VPORT1_SEQ1, VPORT1_SEQ2
            ret = nvp6124_i2c_write(id, 0xC1, 0x10); if(ret < 0) goto exit; ///< VPORT1_SEQ3, VPORT1_SEQ4
            ret = nvp6124_i2c_write(id, 0xC2, 0x32); if(ret < 0) goto exit; ///< VPORT2_SEQ1, VPORT2_SEQ2
            ret = nvp6124_i2c_write(id, 0xC3, 0x32); if(ret < 0) goto exit; ///< VPORT2_SEQ3, VPORT2_SEQ4
            ret = nvp6124_i2c_write(id, 0xC8, 0x33); if(ret < 0) goto exit; ///< CH_OUT_SEL1, CH_OUT_SEL2
            ret = nvp6124_i2c_write(id, 0xCA, 0x33); if(ret < 0) goto exit; ///< Disable VCLK_3&4, VDO_3&4
            ret = nvp6124_i2c_write(id, 0xCC, 0x46); if(ret < 0) goto exit; ///< VCLK1_SEL, VCLK_1_DLY_SEL, Dual_Edge Mode
            ret = nvp6124_i2c_write(id, 0xCD, 0x46); if(ret < 0) goto exit; ///< VCLK2_SEL, VCLK_2_DLY_SEL, Dual_Edge Mode
            printk("NVP6124#%d enters PAL 1080P AFHD-CIF 2-CH mode!\n", id);
            break;
    }

    ret = nvp6124_system_init(id); if(ret < 0) goto exit;

exit:
    return ret;
}

int nvp6124_video_init(int id, int vmode)
{
    int ret, ch;

    switch(vmode) {
        case NVP6124_VMODE_1CH_BYPASS:
        default:
            ret = nvp6124_ntsc_common_init(id); if(ret < 0) goto exit;
            for(ch = 0; ch < NVP6124_DEV_CH_MAX; ch++) {
                ret = nvp6124_video_set_equalizer(id, ch, NVP6124_VFMT_1080P30); if(ret < 0) goto exit;
                ret = nvp6124_video_set_output_format(id, ch, NVP6124_VFMT_1080P30, vmode); if(ret < 0) goto exit;
            }
            ret = nvp6124_video_set_output_mode(id, vmode); if(ret < 0) goto exit;
            break;
        case NVP6124_VMODE_NTSC_960H_2CH:
        case NVP6124_VMODE_NTSC_960H_4CH:
            ret = nvp6124_ntsc_common_init(id); if(ret < 0) goto exit;
            for(ch = 0; ch < NVP6124_DEV_CH_MAX; ch++) {
                ret = nvp6124_video_set_equalizer(id, ch, NVP6124_VFMT_960H30); if(ret < 0) goto exit;
                ret = nvp6124_video_set_output_format(id, ch, NVP6124_VFMT_960H30, vmode); if(ret < 0) goto exit;
            }
            ret = nvp6124_video_set_output_mode(id, vmode); if(ret < 0) goto exit;
            break;
        case NVP6124_VMODE_NTSC_720P_2CH:
            ret = nvp6124_ntsc_common_init(id); if(ret < 0) goto exit;
            for(ch = 0; ch < NVP6124_DEV_CH_MAX; ch++) {
                ret = nvp6124_video_set_equalizer(id, ch, NVP6124_VFMT_720P30); if(ret < 0) goto exit;
                ret = nvp6124_video_set_output_format(id, ch, NVP6124_VFMT_720P30, vmode); if(ret < 0) goto exit;
            }
            ret = nvp6124_video_set_output_mode(id, vmode); if(ret < 0) goto exit;
            break;
        case NVP6124_VMODE_PAL_960H_2CH:
        case NVP6124_VMODE_PAL_960H_4CH:
            ret = nvp6124_pal_common_init(id); if(ret < 0) goto exit;
            for(ch = 0; ch < NVP6124_DEV_CH_MAX; ch++) {
                ret = nvp6124_video_set_equalizer(id, ch, NVP6124_VFMT_960H25); if(ret < 0) goto exit;
                ret = nvp6124_video_set_output_format(id, ch, NVP6124_VFMT_960H25, vmode); if(ret < 0) goto exit;
            }
            ret = nvp6124_video_set_output_mode(id, vmode); if(ret < 0) goto exit;
            break;
        case NVP6124_VMODE_PAL_720P_2CH:
            ret = nvp6124_pal_common_init(id); if(ret < 0) goto exit;
            for(ch = 0; ch < NVP6124_DEV_CH_MAX; ch++) {
                ret = nvp6124_video_set_equalizer(id, ch, NVP6124_VFMT_720P25); if(ret < 0) goto exit;
                ret = nvp6124_video_set_output_format(id, ch, NVP6124_VFMT_720P25, vmode); if(ret < 0) goto exit;
            }
            ret = nvp6124_video_set_output_mode(id, vmode); if(ret < 0) goto exit;
            break;
        case NVP6124_VMODE_NTSC_960H_720P_2CH:
            ret = nvp6124_ntsc_common_init(id); if(ret < 0) goto exit;
            for(ch = 0; ch < NVP6124_DEV_CH_MAX; ch++) {
                ret = nvp6124_video_set_equalizer(id, ch, (ch/2)?NVP6124_VFMT_720P30:NVP6124_VFMT_960H30); if(ret < 0) goto exit;
                ret = nvp6124_video_set_output_format(id, ch, (ch/2)?NVP6124_VFMT_720P30:NVP6124_VFMT_960H30, vmode); if(ret < 0) goto exit;
            }
            ret = nvp6124_video_set_output_mode(id, vmode); if(ret < 0) goto exit;
            break;
        case NVP6124_VMODE_NTSC_720P_960H_2CH:
            ret = nvp6124_ntsc_common_init(id); if(ret < 0) goto exit;
            for(ch = 0; ch < NVP6124_DEV_CH_MAX; ch++) {
                ret = nvp6124_video_set_equalizer(id, ch, (ch/2)?NVP6124_VFMT_960H30:NVP6124_VFMT_720P30); if(ret < 0) goto exit;
                ret = nvp6124_video_set_output_format(id, ch, (ch/2)?NVP6124_VFMT_960H30:NVP6124_VFMT_720P30, vmode); if(ret < 0) goto exit;
            }
            ret = nvp6124_video_set_output_mode(id, vmode); if(ret < 0) goto exit;
            break;
        case NVP6124_VMODE_PAL_960H_720P_2CH:
            ret = nvp6124_pal_common_init(id); if(ret < 0) goto exit;
            for(ch = 0; ch < NVP6124_DEV_CH_MAX; ch++) {
                ret = nvp6124_video_set_equalizer(id, ch, (ch/2)?NVP6124_VFMT_720P25:NVP6124_VFMT_960H25); if(ret < 0) goto exit;
                ret = nvp6124_video_set_output_format(id, ch, (ch/2)?NVP6124_VFMT_720P25:NVP6124_VFMT_960H25, vmode); if(ret < 0) goto exit;
            }
            ret = nvp6124_video_set_output_mode(id, vmode); if(ret < 0) goto exit;
            break;
        case NVP6124_VMODE_PAL_720P_960H_2CH:
            ret = nvp6124_pal_common_init(id); if(ret < 0) goto exit;
            for(ch = 0; ch < NVP6124_DEV_CH_MAX; ch++) {
                ret = nvp6124_video_set_equalizer(id, ch, (ch/2)?NVP6124_VFMT_960H25:NVP6124_VFMT_720P25); if(ret < 0) goto exit;
                ret = nvp6124_video_set_output_format(id, ch, (ch/2)?NVP6124_VFMT_960H25:NVP6124_VFMT_720P25, vmode); if(ret < 0) goto exit;
            }
            ret = nvp6124_video_set_output_mode(id, vmode); if(ret < 0) goto exit;
            break;
        case NVP6124_VMODE_NTSC_CIF_AHD_2CH:
            ret = nvp6124_ntsc_common_init(id); if(ret < 0) goto exit;
            for(ch = 0; ch < NVP6124_DEV_CH_MAX; ch++) {
                ret = nvp6124_video_set_equalizer(id, ch, NVP6124_VFMT_720P60); if(ret < 0) goto exit;
                ret = nvp6124_video_set_output_format(id, ch, NVP6124_VFMT_720P60, vmode); if(ret < 0) goto exit;
            }
            ret = nvp6124_video_set_output_mode(id, vmode); if(ret < 0) goto exit;
            break;
        case NVP6124_VMODE_NTSC_CIF_AHD_4CH:
            ret = nvp6124_ntsc_common_init(id); if(ret < 0) goto exit;
            for(ch = 0; ch < NVP6124_DEV_CH_MAX; ch++) {
                ret = nvp6124_video_set_equalizer(id, ch, NVP6124_VFMT_720P30); if(ret < 0) goto exit;
                ret = nvp6124_video_set_output_format(id, ch, NVP6124_VFMT_720P30, vmode); if(ret < 0) goto exit;
            }
            ret = nvp6124_video_set_output_mode(id, vmode); if(ret < 0) goto exit;
            break;
        case NVP6124_VMODE_PAL_CIF_AHD_2CH:
            ret = nvp6124_pal_common_init(id); if(ret < 0) goto exit;
            for(ch = 0; ch < NVP6124_DEV_CH_MAX; ch++) {
                ret = nvp6124_video_set_equalizer(id, ch, NVP6124_VFMT_720P50); if(ret < 0) goto exit;
                ret = nvp6124_video_set_output_format(id, ch, NVP6124_VFMT_720P50, vmode); if(ret < 0) goto exit;
            }
            ret = nvp6124_video_set_output_mode(id, vmode); if(ret < 0) goto exit;
            break;
        case NVP6124_VMODE_PAL_CIF_AHD_4CH:
            ret = nvp6124_pal_common_init(id); if(ret < 0) goto exit;
            for(ch = 0; ch < NVP6124_DEV_CH_MAX; ch++) {
                ret = nvp6124_video_set_equalizer(id, ch, NVP6124_VFMT_720P25); if(ret < 0) goto exit;
                ret = nvp6124_video_set_output_format(id, ch, NVP6124_VFMT_720P25, vmode); if(ret < 0) goto exit;
            }
            ret = nvp6124_video_set_output_mode(id, vmode); if(ret < 0) goto exit;
            break;
        case NVP6124_VMODE_NTSC_CIF_AFHD_2CH:
            ret = nvp6124_ntsc_common_init(id); if(ret < 0) goto exit;
            for(ch = 0; ch < NVP6124_DEV_CH_MAX; ch++) {
                ret = nvp6124_video_set_equalizer(id, ch, NVP6124_VFMT_1080P30); if(ret < 0) goto exit;
                ret = nvp6124_video_set_output_format(id, ch, NVP6124_VFMT_1080P30, vmode); if(ret < 0) goto exit;
            }
            ret = nvp6124_video_set_output_mode(id, vmode); if(ret < 0) goto exit;
            break;
        case NVP6124_VMODE_PAL_CIF_AFHD_2CH:
            ret = nvp6124_pal_common_init(id); if(ret < 0) goto exit;
            for(ch = 0; ch < NVP6124_DEV_CH_MAX; ch++) {
                ret = nvp6124_video_set_equalizer(id, ch, NVP6124_VFMT_1080P25); if(ret < 0) goto exit;
                ret = nvp6124_video_set_output_format(id, ch, NVP6124_VFMT_1080P25, vmode); if(ret < 0) goto exit;
            }
            ret = nvp6124_video_set_output_mode(id, vmode); if(ret < 0) goto exit;
            break;
    }

exit:
    return ret;
}
EXPORT_SYMBOL(nvp6124_video_init);

int nvp6124_video_get_output_format(int id, int ch, struct nvp6124_video_fmt_t *vfmt, int vmode)
{
    int fmt_idx;

    switch(vmode) {
        case NVP6124_VMODE_1CH_BYPASS:
        default:
            fmt_idx = nvp6124_status_get_video_input_format(id, ch);
            break;
        case NVP6124_VMODE_NTSC_960H_2CH:
        case NVP6124_VMODE_NTSC_960H_4CH:
            fmt_idx = NVP6124_VFMT_960H30;
            break;
        case NVP6124_VMODE_NTSC_720P_2CH:
            fmt_idx = NVP6124_VFMT_720P30;
            break;
        case NVP6124_VMODE_PAL_960H_2CH:
        case NVP6124_VMODE_PAL_960H_4CH:
            fmt_idx = NVP6124_VFMT_960H25;
            break;
        case NVP6124_VMODE_PAL_720P_2CH:
            fmt_idx = NVP6124_VFMT_720P25;
            break;
        case NVP6124_VMODE_NTSC_960H_720P_2CH:
            fmt_idx = ch/2?NVP6124_VFMT_720P30:NVP6124_VFMT_960H30;
            break;
        case NVP6124_VMODE_NTSC_720P_960H_2CH:
            fmt_idx = ch/2?NVP6124_VFMT_960H30:NVP6124_VFMT_720P30;
            break;
        case NVP6124_VMODE_PAL_960H_720P_2CH:
            fmt_idx = ch/2?NVP6124_VFMT_720P25:NVP6124_VFMT_960H25;
            break;
        case NVP6124_VMODE_PAL_720P_960H_2CH:
            fmt_idx = ch/2?NVP6124_VFMT_960H25:NVP6124_VFMT_720P25;
            break;
        case NVP6124_VMODE_NTSC_CIF_AHD_2CH:
            fmt_idx = NVP6124_VFMT_AHD_CIF_P30;
            break;
        case NVP6124_VMODE_NTSC_CIF_AHD_4CH:
            fmt_idx = NVP6124_VFMT_AHD_CIF_P30;
            break;
        case NVP6124_VMODE_PAL_CIF_AHD_2CH:
            fmt_idx = NVP6124_VFMT_AHD_CIF_P25;
            break;
        case NVP6124_VMODE_PAL_CIF_AHD_4CH:
            fmt_idx = NVP6124_VFMT_AHD_CIF_P25;
            break;
        case NVP6124_VMODE_NTSC_CIF_AFHD_2CH:
            fmt_idx = NVP6124_VFMT_AFHD_CIF_P30;
            break;
        case NVP6124_VMODE_PAL_CIF_AFHD_2CH:
            fmt_idx = NVP6124_VFMT_AFHD_CIF_P25;
            break;
    }

    if((fmt_idx > NVP6124_VFMT_UNKNOWN) && (fmt_idx < NVP6124_VFMT_MAX)) {
        vfmt->fmt_idx    = nvp6124_video_fmt_info[fmt_idx].fmt_idx;
        vfmt->width      = nvp6124_video_fmt_info[fmt_idx].width;
        vfmt->height     = nvp6124_video_fmt_info[fmt_idx].height;
        vfmt->prog       = nvp6124_video_fmt_info[fmt_idx].prog;
        vfmt->frame_rate = nvp6124_video_fmt_info[fmt_idx].frame_rate;
        return 0;
    } else {
        return -1;
    }
}
EXPORT_SYMBOL(nvp6124_video_get_output_format);

int nvp6124_video_set_contrast(int id, int ch, u8 value)
{
    int ret;

    if(id >= NVP6124_DEV_MAX || ch >= NVP6124_DEV_CH_MAX)
        return -1;

    ret = nvp6124_i2c_write(id, 0xFF, 0x00);
    if(ret < 0)
        goto exit;

    ret = nvp6124_i2c_write(id, 0x10+ch, value);

exit:
    return ret;
}
EXPORT_SYMBOL(nvp6124_video_set_contrast);

int nvp6124_video_get_contrast(int id, int ch)
{
    int ret;

    if(id >= NVP6124_DEV_MAX || ch >= NVP6124_DEV_CH_MAX)
        return -1;

    ret = nvp6124_i2c_write(id, 0xFF, 0x00);
    if(ret < 0)
        goto exit;

    ret = nvp6124_i2c_read(id, 0x10+ch);

exit:
    return ret;
}
EXPORT_SYMBOL(nvp6124_video_get_contrast);

int nvp6124_video_set_brightness(int id, int ch, u8 value)
{
    int ret;

    if(id >= NVP6124_DEV_MAX || ch >= NVP6124_DEV_CH_MAX)
        return -1;

    ret = nvp6124_i2c_write(id, 0xFF, 0x00);
    if(ret < 0)
        goto exit;

    ret = nvp6124_i2c_write(id, 0x0c+ch, value);

exit:
    return ret;
}
EXPORT_SYMBOL(nvp6124_video_set_brightness);

int nvp6124_video_get_brightness(int id, int ch)
{
    int ret;

    if(id >= NVP6124_DEV_MAX || ch >= NVP6124_DEV_CH_MAX)
        return -1;

    ret = nvp6124_i2c_write(id, 0xFF, 0x00);
    if(ret < 0)
        goto exit;

    ret = nvp6124_i2c_read(id, 0x0c+ch);

exit:
    return ret;
}
EXPORT_SYMBOL(nvp6124_video_get_brightness);

int nvp6124_video_set_saturation(int id, int ch, u8 value)
{
    int ret;

    if(id >= NVP6124_DEV_MAX || ch >= NVP6124_DEV_CH_MAX)
        return -1;

    ret = nvp6124_i2c_write(id, 0xFF, 0x00);
    if(ret < 0)
        goto exit;

    ret = nvp6124_i2c_write(id, 0x3c+ch, value);

exit:
    return ret;
}
EXPORT_SYMBOL(nvp6124_video_set_saturation);

int nvp6124_video_get_saturation(int id, int ch)
{
    int ret;

    if(id >= NVP6124_DEV_MAX || ch >= NVP6124_DEV_CH_MAX)
        return -1;

    ret = nvp6124_i2c_write(id, 0xFF, 0x00);
    if(ret < 0)
        goto exit;

    ret = nvp6124_i2c_read(id, 0x3c+ch);

exit:
    return ret;
}
EXPORT_SYMBOL(nvp6124_video_get_saturation);

int nvp6124_video_set_hue(int id, int ch, u8 value)
{
    int ret;

    if(id >= NVP6124_DEV_MAX || ch >= NVP6124_DEV_CH_MAX)
        return -1;

    ret = nvp6124_i2c_write(id, 0xFF, 0x00);
    if(ret < 0)
        goto exit;

    ret = nvp6124_i2c_write(id, 0x40+ch, value);

exit:
    return ret;
}
EXPORT_SYMBOL(nvp6124_video_set_hue);

int nvp6124_video_get_hue(int id, int ch)
{
    int ret;

    if(id >= NVP6124_DEV_MAX || ch >= NVP6124_DEV_CH_MAX)
        return -1;

    ret = nvp6124_i2c_write(id, 0xFF, 0x00);
    if(ret < 0)
        goto exit;

    ret = nvp6124_i2c_read(id, 0x40+ch);

exit:
    return ret;
}
EXPORT_SYMBOL(nvp6124_video_get_hue);

int nvp6124_video_set_sharpness(int id, int ch, u8 value)
{
    int ret;

    if(id >= NVP6124_DEV_MAX || ch >= NVP6124_DEV_CH_MAX)
        return -1;

    ret = nvp6124_i2c_write(id, 0xFF, 0x00);
    if(ret < 0)
        goto exit;

    ret = nvp6124_i2c_write(id, 0x14+ch, value);

exit:
    return ret;
}
EXPORT_SYMBOL(nvp6124_video_set_sharpness);

int nvp6124_video_get_sharpness(int id, int ch)
{
    int ret;

    if(id >= NVP6124_DEV_MAX || ch >= NVP6124_DEV_CH_MAX)
        return -1;

    ret = nvp6124_i2c_write(id, 0xFF, 0x00);
    if(ret < 0)
        goto exit;

    ret = nvp6124_i2c_read(id, 0x14+ch);

exit:
    return ret;
}
EXPORT_SYMBOL(nvp6124_video_get_sharpness);

int nvp6124_status_get_novid(int id)
{
    int ret;

    if(id >= NVP6124_DEV_MAX)
        return -1;

    ret = nvp6124_i2c_write(id, 0xFF, 0x00);
    if(ret < 0)
        goto exit;

    ret = nvp6124_i2c_read(id, 0xB8);

exit:
    return ret;
}
EXPORT_SYMBOL(nvp6124_status_get_novid);

int nvp6124_status_get_video_input_format(int id, int ch)
{
    int timeout = 3; ///< Debounce design
    int ret = NVP6124_VFMT_UNKNOWN;
    u8 mode_det, mode_det_tmp;

    if(id >= NVP6124_DEV_MAX || ch >= NVP6124_DEV_CH_MAX)
        return ret;

    do {
        ret = nvp6124_i2c_write(id, 0xFF, 0x00); if(ret < 0) goto exit;
        mode_det_tmp = nvp6124_i2c_read(id, 0xD0+ch);
        timeout--;
        ret = nvp6124_i2c_write(id, 0xFF, 0x00); if(ret < 0) goto exit;
        mode_det = nvp6124_i2c_read(id, 0xD0+ch);
    } while((mode_det != mode_det_tmp) && (timeout > 0));

    if((mode_det == 0x10) || (mode_det == 0x40)) { ///< NVP6124_VFMT_720P60 || NVP6124_VFMT_1080P30
        ret = nvp6124_i2c_write(id, 0xFF, 0x00); if(ret < 0) goto exit;
        ret = nvp6124_i2c_write(id, 0x23+NVP6124_DEV_CH_MAX*ch, 0x41); if(ret < 0) goto exit;
        ret = nvp6124_i2c_write(id, 0xFF, 0x05+ch); if(ret < 0) goto exit;
        ret = nvp6124_i2c_write(id, 0x47, 0xEE); if(ret < 0) goto exit;
    } else { ///< Other video input format
        ret = nvp6124_i2c_write(id, 0xFF, 0x00); if(ret < 0) goto exit;
        ret = nvp6124_i2c_write(id, 0x23+NVP6124_DEV_CH_MAX*ch, 0x43); if(ret < 0) goto exit;
        ret = nvp6124_i2c_write(id, 0xFF, 0x05+ch); if(ret < 0) goto exit;
        ret = nvp6124_i2c_write(id, 0x47, 0x04); if(ret < 0) goto exit;
    }

    if((mode_det == 0x01) || (mode_det == 0x02)) { ///< NVP6124_VFMT_960H30 || NVP6124_VFMT_960H25
        ret = nvp6124_i2c_write(id, 0xFF, 0x00); if(ret < 0) goto exit;
        mode_det_tmp = nvp6124_i2c_read(id, 0xE8+ch);
        if((mode_det_tmp == 0x6A) || (mode_det_tmp == 0x6E)) {
            ret = nvp6124_i2c_write(id, 0x21+NVP6124_DEV_CH_MAX*ch, mode_det==0x02?0x22:0xA2); if(ret < 0) goto exit;
        }
        else {
            ret = nvp6124_i2c_write(id, 0x21+NVP6124_DEV_CH_MAX*ch, mode_det==0x02?0x02:0x82); if(ret < 0) goto exit;
        }
    }

    switch(mode_det) {
        case 0x01:
            ret = NVP6124_VFMT_960H30;
            break;
        case 0x02:
            ret = NVP6124_VFMT_960H25;
            break;
        case 0x04:
            ret = NVP6124_VFMT_720P30;
            break;
        case 0x08:
            ret = NVP6124_VFMT_720P25;
            break;
        case 0x10:
            ret = NVP6124_VFMT_720P60;
            break;
        case 0x20:
            ret = NVP6124_VFMT_720P50;
            break;
        case 0x40:
            ret = NVP6124_VFMT_1080P30;
            break;
        case 0x80:
            ret = NVP6124_VFMT_1080P25;
            break;
        default:  // ret = NVP6124_VFMT_UNKNOWN
            break;
    }

exit:
    return ret;
}
EXPORT_SYMBOL(nvp6124_status_get_video_input_format);

static int nvp6124_audio_set_master_chan_seq(int id, char *RSEQ)
{
    u16 data;
    int ret;
    //printk("%s\n", __func__);
    data = RSEQ[0];
    ret = nvp6124_i2c_write(id, 0x0A, data); if(ret < 0) goto exit;
    data = RSEQ[1];
    ret = nvp6124_i2c_write(id, 0x0B, data); if(ret < 0) goto exit;
    data = RSEQ[2];
    ret = nvp6124_i2c_write(id, 0x0C, data); if(ret < 0) goto exit;
    data = RSEQ[3];
    ret = nvp6124_i2c_write(id, 0x0D, data); if(ret < 0) goto exit;
    data = RSEQ[4];
    ret = nvp6124_i2c_write(id, 0x0F, data); if(ret < 0) goto exit;
    data = RSEQ[5];
    ret = nvp6124_i2c_write(id, 0x10, data); if(ret < 0) goto exit;
    data = RSEQ[6];
    ret = nvp6124_i2c_write(id, 0x11, data); if(ret < 0) goto exit;
    data = RSEQ[7];
    ret = nvp6124_i2c_write(id, 0x12, data); if(ret < 0) goto exit;
exit:
    return ret;
}

static int nvp6124_audio_set_slave_chan_seq(int id)
{
    int ret;
    // L: 1/2/3/4/5/6/7/8
    ret = nvp6124_i2c_write(id, 0x0A, 0x10); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0x0B, 0x32); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0x0C, 0x54); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0x0D, 0x76); if(ret < 0) goto exit;

    // R: 9/10/11/12/13/14/15/16
    ret = nvp6124_i2c_write(id, 0x0F, 0x98); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0x10, 0xBA); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0x11, 0xDC); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0x12, 0xFE); if(ret < 0) goto exit;
exit:
    return ret;
}

static int nvp6124_audio_init(int id, int ch_num)
{
    int ret;
    int banksave = 0;
    int cascade  = 0;
    unsigned char bitrates   = AUDIO_BITS_8B;
    unsigned char samplerate = AUDIO_SAMPLERATE_8K;
    //u32 chip_id = ftpmu010_get_attr(ATTR_TYPE_CHIPVER) >> 16;
    int i, j, ch, ch1;
    char RSEQ[8] = {0};
    u32 *temp;
    u16 *temp1;

    if (ch_num == 16)
        cascade = 1;

    /* NVP6124 just support 2/4/8/16 channel number */
	if (ch_num >= 8){
        bitrates = AUDIO_BITS_16B;
    }
    else if (ch_num == 4){
        bitrates = AUDIO_BITS_16B;
    }
    else if (ch_num == 2){
        bitrates = AUDIO_BITS_16B;
    }

    banksave = nvp6124_i2c_read(id, 0xff);      ///< save bank

    ret = nvp6124_i2c_write(id, 0xff, 0x01); if(ret < 0) goto exit;     ///< select bank 1
	ret = nvp6124_i2c_write(id, 0x22, 0x00); if(ret < 0) goto exit; 	///< Audio No MIXed out - Gain 0 (AOGAIN=0)
    ret = nvp6124_i2c_write(id, 0x23, 0x10); if(ret < 0) goto exit;     ///< Audio No MIXed out - No audio Output (MIX_OUTSEL=25)    
	ret = nvp6124_i2c_write(id, 0x01, 0x08); if(ret < 0) goto exit;     ///< Audio input gain init - Gain 1.0
    ret = nvp6124_i2c_write(id, 0x02, 0x08); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0x03, 0x08); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0x04, 0x08); if(ret < 0) goto exit;	
	ret = nvp6124_i2c_write(id, 0x40, 0x08); if(ret < 0) goto exit;     ///< Audio input gain init - Gain 1.0
    ret = nvp6124_i2c_write(id, 0x41, 0x08); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0x42, 0x08); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0x43, 0x08); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0xd5, 0x01); if(ret < 0) goto exit;     ///< set ACLK_PB is master = 0x1, slave = 0x0

    if (cascade) {
        // at gm8210, 0(0x66)/2(0x62) is master --> first stage, 1(0x64)/3(0x60) is slave --> last stage
        // at gm8287, 0(0x64) is master --> first stage, 1(0x66) is slave --> last stage
        // at gm8282, 0(0x60) is master --> first stage, 1(0x64) is slave --> last stage
        if ((id == 1)||(id == 3)) { // configure slave
            ret = nvp6124_i2c_write(id, 0x06, 0x19); if(ret < 0) goto exit;                                         ///< RM cascade last stage
            ret = nvp6124_i2c_write(id, 0x07, 0x00 | (samplerate << 3) | (bitrates << 2)); if(ret < 0) goto exit;   ///< RM master
            ret = nvp6124_i2c_write(id, 0x13, 0x00 | (samplerate << 3) | (bitrates << 2)); if(ret < 0) goto exit;   ///< PB slave
        }
        else {                      // configure master
            ret = nvp6124_i2c_write(id, 0x06, 0x1a); if(ret < 0) goto exit;                                         ///< RM cascade first stage
            ret = nvp6124_i2c_write(id, 0x07, 0x80 | (samplerate << 3) | (bitrates << 2)); if(ret < 0) goto exit;   ///< RM master
            ret = nvp6124_i2c_write(id, 0x13, 0x00 | (samplerate << 3) | (bitrates << 2)); if(ret < 0) goto exit;   ///< PB slave
        }
    }
    else {
		ret = nvp6124_i2c_write(id, 0x23, 0x20 | 0x10); if(ret < 0) goto exit;
        ret = nvp6124_i2c_write(id, 0x06, 0x1B); if(ret < 0) goto exit;      //modify                                       ///< RM single operation (CHIP_STAGE=3)
        ret = nvp6124_i2c_write(id, 0x07, 0x80 | (samplerate << 3) | (bitrates << 2)); if(ret < 0) goto exit;       ///< RM master
        ret = nvp6124_i2c_write(id, 0x13, 0x00 | (samplerate << 3) | (bitrates << 2)); if(ret < 0) goto exit;       ///< PB slave
    }

    if (2 == ch_num) {
        ret = nvp6124_i2c_write(id, 0x08, 0x00); if(ret < 0) goto exit;            ///< RM channel number 2
    } else if (4 == ch_num) {
        ret = nvp6124_i2c_write(id, 0x08, 0x01); if(ret < 0) goto exit;            ///< RM channel number 4
    } else if (8 == ch_num) {
        ret = nvp6124_i2c_write(id, 0x08, 0x02); if(ret < 0) goto exit;            ///< RM channel number 8
    } else if (16 == ch_num) {
        ret = nvp6124_i2c_write(id, 0x08, 0x03); if(ret < 0) goto exit;            ///< RM channel number 16
    }

    if (cascade) {
        if ((id == 0)||(id == 2)) {     // 0/2 is master, configure master
            for(i = 0; i < 4; i++) {
                j = i * 2;
				ch = nvp6124_ain_to_ch(id, j);
				ch1 = nvp6124_ain_to_ch(id, j+1);
                RSEQ[i] = (ch1 << 4 | ch);
                ch = nvp6124_ain_to_ch(id + 1, j);
				ch1 = nvp6124_ain_to_ch(id + 1, j+1);
                ch += 8;
                ch1 += 8;
                RSEQ[i+4] = (ch1 << 4 | ch);				
            }
            for (i = 0; i < 8; i++)
                SWAP_2CHANNEL(RSEQ[i]);

            for (i = 0; i < 2; i++) {
                j = i*4;
                temp = (u32 *)&RSEQ[j];
                SWAP_8CHANNEL(*temp);
            }
            ret = nvp6124_audio_set_master_chan_seq(id, RSEQ);
        }
        else    // 1/3 is slave
            ret = nvp6124_audio_set_slave_chan_seq(id);
    }
	else {

		for(i = 0; i < 4; i++) {	
			j = i * 2;				 
			ch = nvp6124_ain_to_ch(id, j);			
			ch1 = nvp6124_ain_to_ch(id, j+1);			 	
			RSEQ[i] = (ch1 << 4 | ch); 	   
		}

		for (i = 0; i < 8; i++) 		   
			SWAP_2CHANNEL(RSEQ[i]);		  

		for (i = 0; i < 4; i++) { 		   
			j = i*2; 		   
			temp1 = (u16 *)&RSEQ[j]; 		   
			SWAP_4CHANNEL(*temp1);		 
		}

		RSEQ[4] = RSEQ[2];		  
		RSEQ[5] = RSEQ[3];	
		RSEQ[2] = 0x98; 	   
		RSEQ[3] = 0xba;		  
		RSEQ[6] = 0xdc;		 
		RSEQ[7] = 0xfe;

		ret = nvp6124_audio_set_master_chan_seq(id, RSEQ);
	}

    ret = nvp6124_i2c_write(id, 0x23, 0x10); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0x22, 0x08); if(ret < 0) goto exit;          ///< Audio No MIXed out - Gain 1.0 (AOGAIN=8) //modify
    ret = nvp6124_i2c_write(id, 0x14, 0x00); if(ret < 0) goto exit;          ///< playback select channel - channel 0 (PB_SEL=0)
    ret = nvp6124_i2c_write(id, 0x24, 0x14); if(ret < 0) goto exit;          ///set mic_1's data to i2s_sp left channel
    ret = nvp6124_i2c_write(id, 0x25, 0x15); if(ret < 0) goto exit;          ///set mic_2's data to i2s_sp right channel
    
    ret = nvp6124_i2c_write(id, 0xff, banksave); if(ret < 0) goto exit;      ///< restore bank setting

exit:
    return ret;
}

static int nvp6124_audio_set_sample_rate(int id, NVP6124_SAMPLERATE_T samplerate)
{
    int banksave, data, umask;
    int ret;

    banksave = nvp6124_i2c_read(id, 0xff);      ///< save bank

    ret = nvp6124_i2c_write(id, 0xff, 0x01); if(ret < 0) goto exit;          ///< select bank 1
    data = nvp6124_i2c_read(id, 0x07);
    umask = (unsigned char)(AUDIO_SAMPLERATE_16K << 3);
    data &= ~umask;
    data |= (samplerate << 3);
    ret = nvp6124_i2c_write(id, 0x07, data); if(ret < 0) goto exit;

    data = nvp6124_i2c_read(id, 0x13);
    umask = (unsigned char)(AUDIO_SAMPLERATE_16K << 3);
    data &= ~umask;
    data |= (samplerate << 3);
    ret = nvp6124_i2c_write(id, 0x13, data); if(ret < 0) goto exit;

    ret = nvp6124_i2c_write(id, 0xff, banksave); if(ret < 0) goto exit;      ///< restore bank setting

exit:
    return ret;
}

static int nvp6124_audio_set_sample_size(int id, NVP6124_SAMPLESIZE_T samplesize)
{
    int banksave, data, umask;
    int ret;

    banksave = nvp6124_i2c_read(id, 0xff);      ///< save bank

    ret = nvp6124_i2c_write(id, 0xff, 0x01); if(ret < 0) goto exit;          ///< select bank 1
    data = nvp6124_i2c_read(id, 0x07);
    umask = (unsigned char)(AUDIO_BITS_8B << 2);
    data &= ~umask;
    data |= (samplesize << 2);
    ret = nvp6124_i2c_write(id, 0x07, data); if(ret < 0) goto exit;

    data = nvp6124_i2c_read(id, 0x13);
    umask = (unsigned char)(AUDIO_BITS_8B << 2);
    data &= ~umask;
    data |= (samplesize << 2);
    ret = nvp6124_i2c_write(id, 0x13, data); if(ret < 0) goto exit;

    ret = nvp6124_i2c_write(id, 0xff, banksave); if(ret < 0) goto exit;      ///< restore bank setting

exit:
    return ret;
}


int nvp6124_audio_set_mute(int id, int on)
{
    int banksave;
    int ret;

    banksave = nvp6124_i2c_read(id, 0xff);      ///< save bank
    ret = nvp6124_i2c_write(id, 0xff, 0x01);  if(ret < 0) goto exit;             ///< select bank 1
    ret = nvp6124_i2c_write(id, 0x22, on ? 0x00 : 0x80); if(ret < 0) goto exit;  ///< Audio No MIXed out - Gain 0|1 (AOGAIN=0|1)
    ret = nvp6124_i2c_write(id, 0xff, banksave); if(ret < 0) goto exit;          ///< restore bank setting

exit:
    return ret;
}
EXPORT_SYMBOL(nvp6124_audio_set_mute);

int nvp6124_audio_get_mute(int id)
{
    int banksave, aogain;
    int ret;

    banksave = nvp6124_i2c_read(id, 0xff);       ///< save bank

    ret = nvp6124_i2c_write(id, 0xff, 0x01); if(ret < 0) goto exit;    ///< select bank 1
    aogain = nvp6124_i2c_read(id, 0x22);
    aogain = aogain&0x0f;// >> 4;

    nvp6124_i2c_write(id, 0xff, banksave);       ///< restore bank setting

    return aogain;

exit:
    return ret;
}
EXPORT_SYMBOL(nvp6124_audio_get_mute);

int nvp6124_audio_set_volume(int id, int volume)
{
    int banksave;
    int ret;

    banksave = nvp6124_i2c_read(id, 0xff);      ///< save bank
    ret = nvp6124_i2c_write(id, 0xff, 0x01);  if(ret < 0) goto exit;             ///< select bank 1
    ret = nvp6124_i2c_write(id, 0x22, (volume&0x0f)); if(ret < 0) goto exit;     ///< AOGAIN setting
    ret = nvp6124_i2c_write(id, 0xff, banksave); if(ret < 0) goto exit;          ///< restore bank setting

exit:
    return ret;
}
EXPORT_SYMBOL(nvp6124_audio_set_volume);

int nvp6124_audio_get_output_ch(int id)
{
    int banksave, ch;
    int ret;

    banksave = nvp6124_i2c_read(id, 0xff);       ///< save bank

    ret = nvp6124_i2c_write(id, 0xff, 0x01); if(ret < 0) goto exit;    ///< select bank 1
    ch = nvp6124_i2c_read(id, 0x23);
    ch &= 0x1f;

    nvp6124_i2c_write(id, 0xff, banksave);       ///< restore bank setting

    return ch;

exit:
    return ret;
}
EXPORT_SYMBOL(nvp6124_audio_get_output_ch);

int nvp6124_audio_set_output_ch(int id, int ch)
{
    int banksave, data;
    int ret;

    banksave = nvp6124_i2c_read(id, 0xff);      ///< save bank
    ret = nvp6124_i2c_write(id, 0xff, 0x01);  if(ret < 0) goto exit;             ///< select bank 1
    data = nvp6124_i2c_read(id, 0x23);
    data &= 0x20;
    data |= ch;
    ret = nvp6124_i2c_write(id, 0x23, data); if(ret < 0) goto exit;              ///< MIX_OUTSEL
    ret = nvp6124_i2c_write(id, 0xff, banksave); if(ret < 0) goto exit;          ///< restore bank setting

exit:
    return ret;
}
EXPORT_SYMBOL(nvp6124_audio_set_output_ch);

int nvp6124_audio_set_play_ch(int id, unsigned char ch)
{
    int banksave;
    int ret;

    banksave = nvp6124_i2c_read(id, 0xff);      ///< save bank
    ret = nvp6124_i2c_write(id, 0xff, 0x01); if(ret < 0) goto exit;          ///< select bank 1
    ret = nvp6124_i2c_write(id, 0x14, (ch & 0x0F)); if(ret < 0) goto exit;
    ret = nvp6124_i2c_write(id, 0xff, banksave); if(ret < 0) goto exit;      ///< restore bank setting

exit:
    return ret;
}
EXPORT_SYMBOL(nvp6124_audio_set_play_ch);

int nvp6124_audio_set_mode(int id, NVP6124_VMODE_T mode, NVP6124_SAMPLESIZE_T samplesize, NVP6124_SAMPLERATE_T samplerate)
{
    int ch_num = 0;
    int ret;

    ch_num = audio_chnum;
    if(ch_num < 0)
        return -1;

    /* nvp6124 audio initialize */
    ret = nvp6124_audio_init(id, ch_num); if(ret < 0) goto exit;
    /* set audio sample rate */
    ret = nvp6124_audio_set_sample_rate(id, samplerate); if(ret < 0) goto exit;
    /* set audio sample size */
    ret = nvp6124_audio_set_sample_size(id, samplesize); if(ret < 0) goto exit;
    /* set nvp6124 AOGAIN mute */
    //ret = nvp6124_audio_set_mute(id, 0); if(ret < 0) goto exit;

exit:
    return ret;
}
EXPORT_SYMBOL(nvp6124_audio_set_mode);

